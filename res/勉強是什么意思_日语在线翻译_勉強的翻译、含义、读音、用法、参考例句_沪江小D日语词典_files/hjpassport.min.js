var HJPassport=function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var n,s,a,r,o=i(5).actions,c=i(5).flow,l=i(7),p=function(){switch(n.name){case o.REG_SUCCESS:a.fire("register_success_close"),window.location.reload&&window.location.reload();break;case o.CATE_SELECT:a.fire("interest_step1_close",{login:!!n.setInterest}),n.setInterest&&window.location.reload();break;case o.INTEREST_SELECT:a.fire("interest_step2_close",{login:!!n.setInterest}),n.setInterest&&window.location.reload();break;case o.LOGIN:n.isNewUser?a.fire("login_close"):a.fire("login_close_witheixst");break;case o.REGISTER:"email"===n.currentAction.view.currentMode?a.fire("register_email_close"):a.fire("register_mobile_close")}},h={initialized:!1,container:null,version:"0.3.5-over100mil",init:function(e){if(!this.initialized){$.extend(l,e),l.client=l.client||(e.container?"mobile":"pc"),r=i(6),s=i(1),n=i(4),a=i(43);var t;i(102);(t=e.container)?(n.mode="inline","pc"!==l.client&&t.addClass("hp-mobile-container"),window.onpopstate=function(e){var t=e.state;t&&t.name?(r.switchToView(t.name,null,!0),n.currentFlow=t.currentFlow||n.currentFlow):n.firstView&&(r.switchToView(n.firstView,n.firstViewOpts,!0),n.currentFlow=n.firstFlow||n.currentFlow)}):(n.mode="popup",t=$("<div class='hp-view-container'></div>").appendTo("body").hpdialog({close:p})),a.register(t),n.element=t,s.initTip(t),this.initialized=!0}},login:function(e){this.init(e),r.switchToFlow(c.LOGIN)},register:function(e){this.init(e),r.switchToFlow(c.REGISTER)},thirdParty:function(e){this.init(e),r.switchToFlow(c.LOGIN_THIRD)},show:function(e,t){"popup"===n.mode&&n.element.hpdialog("open"),r.switchToFlow(e,t)},showView:function(e,t){r.switchToView(e,t)},showError:function(e){s.showErrorMessage(e)},_getContext:function(){return n}};e.exports=h},function(e,t,i){var n=(i(2),i(4)),s=i(5).flow,a='<div class="hp-common-info">   <p class="hp-common-info-line">提示</p></div>',r=function(e,t){if("undefined"!=typeof e){t=Array.prototype.slice.call(arguments,1);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return!0;return!1}};e.exports={initTip:function(e){this.errorTip=$(a).appendTo(e),this.errorTip.hperrortip()},showTip:function(e){this.errorTip.hperrortip("show",e)},showErrorMessage:function(e,t,i,n){void 0===t?(t=e,this.showTip(t)):this.showErrorByCode(e,t,i,n)},showErrorByCode:function(e,t,a,o){var c="",l=!1;if(r(e,1101,1102,1103,1104,1301,1304,1202,1201))c=n.currentFlow!==s.LOGIN||n.isNewUser?"username":"password",a._updateCaptcha&&a._updateCaptcha();else if(1302===e)c="mobile";else if(1303===e)c="email";else if(1004===e)a._showCaptcha&&(a._showCaptcha(!0),a._updateCaptcha()),a._updateTimer&&a._updateTimer(),c="captcha";else if(1006===e)c="sms",a._updateCaptcha();else if(1008===e)c="sms",a._showCaptcha(!0),a._updateCaptcha();else if(1503===e){t="用户操作超时，将自动跳转登录页面";var p=i(6);window.setTimeout(function(){p.switchToFlow(s.LOGIN)},3e3)}l||(c&&a.element.find("[name="+c+"]").length?a.showErrorOnField(c,t,o):this.showTip(t))}}},function(e,t,i){var n=i(3);e.exports=n.extend("Errortip",{render:function(){this.element.hide()},_registerOuterClick:function(){var e=this,t=$(document);t.unbind("click.errortip"),setTimeout(function(){t.bind("click.errortip",function(t){e.hide()})},10)},show:function(e){var t=this;this.element.children(":first").text(e),this.element.css({display:"table"}),this._registerOuterClick();setTimeout(function(){t.hide()},2e3)},hide:function(){this.element.hide(),$(document).unbind("click.errortip")}})},function(e,t){var i=Object.prototype.hasOwnProperty,n=Array.prototype.slice,s=function(e){for(var t,i,a=n.call(arguments,1),r=0,o=a.length;o>r;r++)for(t in a[r])i=a[r][t],a[r].hasOwnProperty(t)&&void 0!==i&&($.isPlainObject(i)?e[t]=$.isPlainObject(e[t])?s({},e[t],i):s({},i):e[t]=i);return e},a=function(e,t){window.$&&($.fn[e]=function(i){var s="string"==typeof i,a=n.call(arguments,1),r=this;return s?this.each(function(){var t,n,s=c[$(this).attr("data-hp-widgets")];if(!s)throw"No widget found!";if(n=s[e],!n)throw"Cannot call method before "+e+" initialized!";if("function"!=typeof n[i])throw"There is no method called "+i;return t=n[i].apply(n,a),t!==n&&void 0!==t?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0}):this.each(function(){var n=$(this),s=new t(n,i);n.attr("data-hp-widgets",o),c[o+""]=c[o+""]||{},c[o+""][e]=s,o++}),r})},r=function(){},o=0,c={},l=function(){};r.prototype={options:{enabled:!0},_createWidget:function(e,t){var i=this;i.options=s({},i.options,t),i.element=e,i.render(),i._trigger("create",null,i._getCreateEventData()),i.init()},_getCreateEventData:function(){return{el:this.element}},render:l,init:l,_destroy:l,_invoke:function(e,t,i){var s=this.options[e],i=n.call(arguments,2);return"function"==typeof s?s.apply(t,i):void 0},_trigger:function(e,t,i){var n=this.options[e];return"function"==typeof n?n.call(this.element[0],t,i):void 0},destroy:function(){this._destroy(),this.element.unbind(this.ns).removeData(this.widgetFullName)}},r.extend=function(e,t){function n(){this.constructor=l}var r,o,c,l=function(e,t){this._createWidget(e,t)};r=this,c="hp"+e.toLowerCase();for(var p in r)i.call(r,p)&&(l[p]=r[p]);return n.prototype=r.prototype,o=new n,l.__super__=r.prototype,o.options=s({},o.options),l.prototype=s(o,t,{widgetName:e}),a(c,l),l},e.exports=r},function(e,t){e.exports={element:null,categoryId:1e3,username:null,email:null,currentFlow:null,currentAction:null,thirdResetLinks:{}}},function(e,t){e.exports={actions:{LOGIN:"login",REGISTER:"register",INTEREST_SELECT:"interest-select",CATE_SELECT:"category-select",REG_SUCCESS:"register-success",LOGIN_TRANSFER:"login-transfer",LOGIN_THIRD:"login-third",LOGIN_THIRD_BIND:"login-third-bind",LOGIN_THIRD_SUCCESS:"login-third-success",RESETPWD_CHOOSE:"resetpwd-choose",RESETPWD_SMS:"resetpwd-sms",RESETPWD_EMAIL:"resetpwd-email",RESETPWD_EMAIL_VALIDATE:"resetpwd-email-validate",RESETPWD_RESET:"resetpwd-reset",RESETPWD_SUCCESS:"resetpwd-success",RESETPWD_FAIL:"resetpwd-fail"},flow:{LOGIN:"login",REGISTER:"register",LOGIN_THIRD:"login-third",RESETPWD:"resetpwd"}}},function(e,t,i){var n=i(4),s=i(8),a=i(101),r=i(7),o=i(18),c=function(){},l=function(e,t){return/^__/.test(t)&&"function"==typeof e[t]},p=function(e,t){for(var i in e)if(l(e,i)){var n=i.replace(/^__/,"");t.on(n,function(){var t=i;return function(){e[t]&&e[t].apply(e,arguments)}}())}};c.prototype={init:function(){},skiped:function(){},show:function(e){this.view.show(e)},load:function(e){this.initialized||(this.view=s[this.key],this.view.element.hide(),n.element.append(this.view.element),p(this,this.view),this.init(),this.initPartial&&this.initPartial(),this.initialized=!0),this.show(e)}},e.exports={switchToView:a.switchToView,switchToFlow:a.switchToFlow,historyBack:function(){history.back()},redirect:function(){r.redirectURL&&"popup"!==n.mode?window.location.replace(decodeURIComponent(r.redirectURL)):window.location.reload()},register:function(e,t,i){i||(i=t,t=[]);var n=o(c,t,i),s=new n;s.key=e,a.actions[e]=s}}},function(e,t){e.exports={container:null,API_SLD:"",skips:[],skipsOnLogin:[],skipsOnThird:[],client:"",source:"",redirectURL:encodeURIComponent(window.location.href),disable3rdParty:[],diableEmail:!1}},function(e,t,i){var n=i(9).views;i(19),i(30),i(35),i(46),i(50),i(54),i(60),i(65),i(69),i(73),i(77),i(81),i(85),i(89),i(93),i(97),e.exports=n},function(e,t,i){var n=i(10),s=i(18),a={};t.register=function(e,t,i){if(a[e])throw"This view already existed!";i||(i=t,t=[]);var r=s(n,t,i),o=new r(i);o.name=e,a[e]=o},t.views=a},function(e,t,i){i(11);var n=i(17),s=(i(1),function(e){e&&(this._init(e),this.initialized=!0)});s.prototype={_init:function(e){var t=e.template;e.templateInitData&&(t=n(t,e.templateInitData)),this.element=$(t),this.callbacks={},this.init(),this.initPartial&&this.initPartial()},init:function(){},show:function(){this.element.show(),this.update.apply(this,arguments)},showErrorOnField:function(e,t,i){this.element.hpvalidator("showError",e,t,i)},update:function(){},on:function(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this},trigger:function(e,t){var i=this.callbacks[e];if(i){t=Array.prototype.slice.call(arguments,1);for(var n=0,s=i.length;s>n;n++)"function"==typeof i[n]&&i[n].apply(this,t)}}},e.exports=s},function(e,t){},,,,,,function(e,t){e.exports=function(e,t){e=String(e);var i=Array.prototype.slice.call(arguments,1),n=Object.prototype.toString;return i.length?(i=1==i.length&&null!==t&&/\[object (Array|Object)\]/.test(n.call(t))?t:i,e.replace(/\{\{(.+?)\}\}/g,function(e,t){for(var s,a=t.split("."),r=a.shift(),o=i;r;){if(void 0===o[r]){o=void 0;break}o=o[r],r=a.shift()}return s=o,"[object Function]"===n.call(s)&&(s=s(t)),void 0===s?"":s})):e}},function(e,t){var i=function(e,t,i){for(var n=[e],s=[],a=t.length,r=0;a>r;r++)t[r]._initPartial&&s.push(t[r]._initPartial),n.push(t[r]);(a=s.length)&&(e.initPartial=function(){for(var e=0;a>e;e++)s[e].apply(this,arguments)}),n.push(i),$.extend.apply(null,n)};e.exports=function(e,t,n){var s=function(){e.apply(this,arguments)};return s.prototype=new e,i(s.prototype,t,n),s}},function(e,t,i){i(20);var n=i(9),s=(i(17),i(22),i(23),i(24),i(25),i(7)),a=(i(26),"hp-disabled"),r="登录中",o="登录",c=i(27),l=i(28);n.register("login",[c,l],{template:i(29),init:function(){var e=this,t=e.element;this.submitBtn=t.find(".hp-btn"),t.hpvalidator({events:"focusin",validClass:""}),t.find("input").hpinput(),t.on("click",".hp-user-del",function(){e._switchAvatar(!1),e.trigger("clear")}).on("keyup","input",function(t){13===t.keyCode&&e._handleLogin()}).on("click",".hp-register",function(t){e.trigger("registerClick"),t.preventDefault()}).on("click",".hp-btn",function(){e._handleLogin()}).on("click",".hp-forgot",function(){e.trigger("forgotPwd")}).on("click",".hp-back",function(){e.trigger("previous")}),"pc"===s.client&&t.find(".hp-back").hide()},_handleLogin:function(){!this.submitBtn.hasClass(a)&&this.element.hpvalidator("valid")&&(this.disableSubmit(!0),this.trigger("login",{userName:this.element.find(".hp-username").val(),password:this.element.find(".hp-password").val(),imgcode:this.element.find(".hp-captcha").val()}))},disableSubmit:function(e){e?this.submitBtn.addClass(a).text(r):this.submitBtn.removeClass(a).text(o)},_switchAvatar:function(e){var t=this.element;t.find(".hp-input-username")[e?"hide":"show"](),t.find(".hp-input-userinfo")[e?"show":"hide"](),e||this._clear(),this.trigger("switchAvatar",e)},_clear:function(){var e=this.element;e.find(".hp-password").val(""),e.find(".hp-username").val("")},updateAvatar:function(e,t,i){var n=this.element.find(".hp-input-userinfo");n.find(".hp-user-name").text(e),n.find(".hp-user-avatar").attr("src",t),i&&this.element.find(".hp-password").val(i)},update:function(){this.element.find("input").first().focus()}})},function(e,t){},,function(e,t,i){var n=i(3),s=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,a=/^1[34578]\d{9}$/,r=/^(?![0-9]+$)(?![a-zA-Z]+$).*$/,o=/^.{8,20}$/,c=/^[^_\d].*/,l=/^[a-zA-Z\u4E00-\uFA29][_a-zA-Z\d\u4E00-\uFA29]+$/,p=/^\d{6}$/,h=/[\u4E00-\uFA29]/g,u="hp-input-err",d="hp-input-correct",f='input:not([type]),input[type="email"],input[type="number"],input[type="password"],input[type="tel"],input[type="text"],input[type="time"]',v=function(e){return void 0===e||null===e||""===e?!0:void 0},g=function(e,t){return v(e)||t.test(e)},m=function(e){var t,i=0;for(t in e)i++;return i};Validator={rules:{required:{validator:function(e){var t,i=/^\s+|\s+$/g;return void 0===e||null===e?!1:(t=e,"string"==typeof e&&(t=e.replace(i,"")),(t+"").length>0)},message:"不能为空"},cellphone:{validator:function(e){return g(e,a)},message:"手机号码不合法"},equal:{validator:function(e,t){return t&&t.jquery&&(t=t.val()),e===t},message:"必须于上一次的输入相同"},notEqual:{validator:function(e,t){return t&&t.jquery&&(t=t.val()),e!==t},message:"用户名和密码不能相同"},"username-start":{validator:function(e){return g(e,c)},message:"不能以下划线或数字开头"},username:{validator:function(e){var t=e.replace(h,"__"),i=t.length;return g(e,l)&&i>=4&&20>=i},message:"用户名为4-20个不含特殊符号的字符."},email:{validator:function(e){return g(e,s)},message:"邮件格式不合法"},sms:{validator:function(e){return g(e,p)},message:"短信码格式不正确"},password:{validator:function(e){return g(e,r)},message:"密码不能使用纯数字或纯字母"},"password-length":{validator:function(e){return g(e,o)},message:"密码长度为8-20位"}}};var w=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},_=function(e){$(e).parent().removeClass(this.options.errorClass).removeClass(this.options.validClass)},b=function(e){if($(e).val()){this.checkElement(e)}},k=function(e,t){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];if((9!==t.which||""!==$(e).val())&&-1===w(i,t.keyCode)){var n=this.check(e);n&&$(e).parent().removeClass(this.options.errorClass)}},E=function(e){this.checkElement(e)},C=function(e){$(e).parent().addClass(this.options.errorClass).removeClass(this.options.validClass)},y=function(e){$(e).parent().removeClass(this.options.errorClass).addClass(this.options.validClass)};e.exports=n.extend("Validator",{options:{errorClass:u,validClass:d,rules:null,events:"focusin focusout keyup change",fields:{},messages:{},focusin:_,focusout:b,keyup:k,change:E,highlight:C,unhighlight:y},render:function(){var e=this,t=this.options.fields;this.submitted={},this.forceList={},this._reset(),this.options.events&&this.element.bind(this.options.events,function(i){var n,s=i.type,a=i.target,r=a.name;if($(a).is(f)&&(!t[r]||!(n=t[r].events)||-1!==n.lastIndexOf(s)))return e._invoke(s,e,a,i)})},_reset:function(){this.successList=[],this.errorList=[],this.toShow=$([]),this.toHide=$([]),this.currentElements=$([])},_staticRules:function(e){return this.options.rules?this._normalizeRule(this.options.rules[e.name])||{}:{}},_normalizeRule:function(e){if("string"==typeof e){var t={};$.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},_dataRules:function(e){var t,i,n={},s=$(e);for(t in Validator.rules)i=s.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),void 0!==i&&(n[t]=i);return n},_getRules:function(e){return $.extend({},this._dataRules(e),this._staticRules(e))},_formatAndAdd:function(e,t,i){var n=e.name,s=this._customMessage(n,t.method)||this._customDataMessage(e,t.method)||i,a=/\#\{(.+?)\}/g;a.test(s)&&(s=s),this.errorList.push({message:s,element:e,method:t.method}),this.submitted[n]=s},_showLabel:function(e,t){var i=$(e),n=i.siblings(".hp-err-tips:eq(0)");n.length||(n=$('<span class="hp-err-tips"></span>').insertAfter(i)),n.text(t),this.toShow=this.toShow.add(n)},_elements:function(){var e=this,t={};return $(this.element).find("input,select").not(":submit,[disabled],:hidden").filter(function(){return this.name in t||!m(e._getRules(this))?!1:(t[this.name]=!0,!0)})},valid:function(){if(m(this.forceList))return!1;var e=this._checkForm();return this.showErrors(),e},showError:function(e,t,i){var n=this,s=n.element.find("[name="+e+"]");s.length&&(this.errorList.push({message:t,element:s[0]}),i&&(this.forceList[e]=!0),this.successList=$.grep(this.successList,function(t){return t.name!==e}),this.showErrors())},showValid:function(e){var t=this,i=t.element.find("[name="+e+"]");this.forceList[e]&&delete this.forceList[e],$(i).parent().addClass(this.options.validClass)},resetForm:function(){this.submitted={},this.lastElement=null,this._reset(),this.toHide=this._errors(),this._hideErrors(this.toHide)},_checkForm:function(){this._reset();for(var e=0,t=this.currentElements=this._elements();t[e];e++)this._check(t[e]);return 0===this.errorList.length},_customMessage:function(e,t){var i=this.options.messages[e];return i&&(i.constructor===String?i:i[t])},_customDataMessage:function(e,t){return $(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||$(e).data("msg")},checkElement:function(e){if("string"==typeof e?e=this.element.find("[name="+e+"]")[0]:e.jquery&&(e=e[0]),$(e).is("[disabled]"))return!0;var t=this.check(e);return this.showErrors(),t},_check:function(e){var t,i,n,s=this._getRules(e),a=$.trim($(e).val());for(t in s){if(i={method:t,parameters:s[t]},n=Validator.rules[t],!n)throw"没有找到验证规则"+t;if(!n.validator.call(this,a,i.parameters))return this._formatAndAdd(e,i,n.message),!1}return m(s)&&this.successList.push(e),!0},check:function(e){var t,i,n=this.options.fields,s=e.name,a=!0;return this.lastElement=e,this._reset(),this.toHide=$(e).siblings(".hp-err-tips:eq(0)"),this.currentElements=$(e),t=this._check(e),a=t!==!1,n&&(i=n[s])&&"function"==typeof i.validated&&i.validated.call(this,{validated:t,name:s,element:e}),a},showErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)t=this.errorList[e],this._invoke("highlight",this,t.element),this._showLabel(t.element,t.message);for(e=0;this.successList[e];e++)i=this.successList[e],this._invoke("unhighlight",this,i),this._showLabel(i)}})},function(e,t,i){var n=i(3),s=function(){var e,t=document.createElement("input");return e="string"==typeof t.placeholder,t=null,e}(),a='<span class="hp-icon hp-icon-del hp-btn-del-name"></span>';e.exports=n.extend("Input",{options:{hideOnfocus:!1,showCleanBtn:!1},render:function(){var e,t=this,i=t.options;e=this.element.attr("placeholder"),s||"string"!=typeof e||(t.placeholder=$('<span class="hp-placeholder">'+e+"</span>"),t.placeholder.insertBefore(this.element)),(i.showCleanBtn||this.element.attr("data-enable-clean"))&&(t.cleanBtn=$(a).insertAfter(this.element).hide(),t.cleanBtn.mousedown(function(){t.element.val("")})),this._bindEvents()},togglePlaceholder:function(e){this.placeholder&&this.placeholder[e]()},toggleCleanBtn:function(e){this.cleanBtn&&this.cleanBtn[e]()},_bindEvents:function(){var e=this;this.element.bind("paste keyup change blur",function(){e.placeholder&&(e.element.val()?e.togglePlaceholder("hide"):e.togglePlaceholder("show")),e.element.val()?e.toggleCleanBtn("show"):e.toggleCleanBtn("hide")}),this.element.bind({keydown:function(t){8!==t.keyCode&&e.togglePlaceholder("hide")},focus:function(){e.options.hideOnfocus&&e.togglePlaceholder("hide")}})}})},function(e,t,i){var n,s,a="",r=i(4),o="//captcha.yeshj.com/api.php",c={render:function(){return"<img src='"+a+"'>"},update:function(){a=n+"&t="+ +new Date},token:s};$.get(o,{w:100,h:30,t:+new Date},function(e){if(n=e.img,c.token=e.token,a=n+"&t="+ +new Date,"inline"===r.mode){var t=$(".hp-captcha-pic img");t.length&&t.attr("src",a)}},"jsonp"),e.exports=c},function(e,t){function i(){return c?"weixin":l?"mobile":"pc"}var n=navigator.userAgent,s=/Android/i.test(n),a=/BlackBerry/i.test(n),r=/IEMobile/i.test(n),o=/iPhone|iPad|iPod/i.test(n),c=/micromessenger/i.test(n),l=s||a||r||o,p=!c&&!l;l=!c&&l,e.exports={isWeixin:c,isMobile:l,isPC:p,device:i()}},function(e,t,i){var n=i(25),s=i(7),a=function(){return s.API_SLD||"//pass"},r=function(e){return a()+".hujiang.com/Handler/UCenter?action="+e};e.exports={getAPISLD:a,genAPIUrl:r,originDomain:document.domain,thirdLoginDomain:document.domain.replace(/.*((?:hujiang|cctalk|hjenglish|hjclass)\.com).*/,"$1"),SSODomains:["hujiang.com","yeshj.com","cctalk.com","hjenglish.com","hjclass.com"],agreementLink:a()+".hujiang.com/"+(n.isPC?"":"m/")+"agreement.aspx",fillUserInfoUrl:a()+".hujiang.com/account",unameCookie:"HJ_USER_NAME",uidCookie:"HJ_USER_ID",EMAIL_DOMAIN:{"@qq.com":"http://mail.qq.com","@163.com":"http://mail.163.com","@126.com":"http://mail.126.com","@sina.com":"http://mail.sina.com","@hujiang.com":"http://mail.hujiang.com","@hotmail.com":"http://mail.hotmail.com","@gmail.com":"http://mail.google.com"},keyCode:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110}}},function(e,t,i){var n=(i(26),i(7)),s=i(25);e.exports={_initPartial:function(){this._disable3rdParty()},_disable3rdParty:function(){var e=n.disable3rdParty||[],t=(e.length,this.element.find(".hp-third-login"));if("all"===n.disable3rdParty)return t.find(".hp-list").hide();s.isMobile&&!s.isWeixin&&(this.element.find(".hp-wechat").hide(),t.addClass("hp-third-with-two"))},_bind3rdClick:function(e){var t=this,i=this.element;e=e||{},i.find(".hp-wechat").click(function(i){t.trigger("hanlde3rdClick",e.weixin||"wechat"),i.preventDefault()}),i.find(".hp-weibo").click(function(i){t.trigger("hanlde3rdClick",e.sina||"weibo"),i.preventDefault()}),i.find(".hp-qq").click(function(i){t.trigger("hanlde3rdClick",e.qq||"qq"),i.preventDefault()})},_update3rdLoginUrl:function(e){var t=this.element;t.find(".hp-wechat").attr("href",e.weixin),t.find(".hp-weibo").attr("href",e.sina),t.find(".hp-qq").attr("href",e.qq)}}},function(e,t,i){var n=i(24),s="hp-hide";e.exports={_initPartial:function(){var e=this;this.element.on("click",".hp-captcha-pic",function(){e._updateCaptcha()})},_renderCaptcha:function(){this.element.find(".hp-captcha-pic").html(n.render())},_updateCaptcha:function(){n.update(),this._renderCaptcha()},_showCaptcha:function(e){var t=this.element.find(".hp-input-captcha"),i=t.find(".hp-captcha");e?(t.removeClass(s),i.removeAttr("disabled")):(t.addClass(s),i.attr("disabled","disabled"))}}},function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>登录沪江</span> <a href=javascript:; class="hp-right hp-register">注册&nbsp;</a></div></div><div class=hp-section><div class=hp-body><div class="hp-input hp-input-username"><input class=hp-username name=username autocomplete=off autocapitalize=off autocorrect=off data-enable-clean=true data-rule-required=true placeholder="手机号/用户名/邮箱"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><div class="hp-input hp-input-userinfo hp-cf"><img src=//i2.hjfile.cn/f96/92/85/34819285.jpg class=hp-user-avatar alt="头像"> <span class=hp-user-name>用户名</span><div class=hp-user-del><span class="hp-icon hp-icon-del"></span></div></div><div class=hp-input><input type=password class=hp-password name=password data-rule-required=true maxlength=20 placeholder="密码"> <a class=hp-forgot href=javascript:void(0); data-bi-point=forgot_password>忘记密码？</a> <span class=hp-err-tips>密码错误提示</span></div><div class="hp-input hp-input-half hp-input-captcha hp-hide"><input class=hp-captcha disabled maxlength=8 name=captcha data-rule-captcha=true data-rule-required=true placeholder="验证码"> <span class="hp-btn-half hp-captcha-pic"></span> <span class=hp-err-tips></span></div><button class="hp-btn hp-btn-green" type=submit data-bi-point=login_submit>登&nbsp;&nbsp;录</button></div><div class=hp-third-login><span class=hp-hide>第三方登录</span><div class="hp-list hp-cf"><a class=hp-wechat target=_blank data-bi-point=login_weixin><p><span class="hp-icon hp-icon-weixin"></span></p><span class=hp-name>微信</span></a> <a class=hp-qq target=_blank data-bi-point=login_qq><p><span class="hp-icon hp-icon-qq"></span></p><span class=hp-name>QQ</span></a> <a class=hp-weibo target=_blank data-bi-point=login_weibo><p><span class="hp-icon hp-icon-weibo"></span></p><span class=hp-name>微博</span></a></div></div></div></div>'},function(e,t,i){i(31);var n=i(9);n.register("login-transfer",{template:i(34)})},function(e,t){},,,function(e,t){e.exports="<div class=hp-view><div class=hp-section><div class=hp-login-transfer><span class=hp-login-transfer-success></span><p class=hp-info><span class=hp-green>登录成功</span>, 正在努力跳转...</p></div></div></div>"},function(e,t,i){i(36);var n=i(9),s=(i(38).Tabs,i(24)),a="hp-disabled",r="hp-hide",o="正在注册",c="注册",l=(i(43),i(7)),p={password:{required:"密码不能为空！"},username:{required:"用户名不能为空！"},mobile:{required:"手机号码不能为空！"},email:{required:"邮箱不能为空！"},sms:{required:"动态码不能为空！"},captcha:{required:"验证码不能为空！"}},h=i(44),u=i(27),d=$.browser&&$.browser.msie&&parseInt($.browser.version,10)<10;n.register("register",[u,h],{template:i(45),templateInitData:{agreementLink:i(26).agreementLink},init:function(){var e=this,t=e.element,i=t.find("#hp-reg-email"),n=t.find("#hp-reg-mobile");e.currentMode="mobile",e.dtm=t.find(".hp-dtm-get"),t.find(".hp-agreement a").attr("href"),t.find("input").hpinput(),t.find(".hp-password").hpstrength(),t.find(".hp-tabs").hptabs({selectedIndexChanged:function(t,s){e.currentMode=0===s.index?"mobile":"email",e.currentTab=0===s.index?n:i,d||e.focus(),e._switchCaptcha(),e._renderCaptcha(),e.trigger("tabIndexChanged",e.currentMode)}});var s=function(t,i){if(i.validated!==!1){var n=this;e.trigger("checkExist",t,$(i.element).val(),function(e,i){e?n.showValid(t):n.showError(t,i,!0)})}},r={events:"focusin, focusout",validated:function(e){s.call(this,"username",e)}},o={events:"focusin,focusout",validated:function(e){s.call(this,"email",e)}},c={validated:function(t){var i=this,n=$(t.element).val();t.validated===!0?e.trigger("checkExist","mobile",n,function(t,n){t?(e._toggleDtm(!0),i.showValid("mobile",!0)):(e._toggleDtm(!1),i.showError("mobile",n,!0))}):e._toggleDtm(!1)}};n.hpvalidator({rules:{password:{notEqual:e.element.find("#hp-reg-mobile [name=username]")}},messages:p,fields:{username:r,mobile:c}}),i.hpvalidator({rules:{password:{notEqual:e.element.find("#hp-reg-email [name=username]")}},messages:p,fields:{username:r,email:o}}),t.on("keyup","input",function(t){13===t.keyCode&&e._onRegisterBtnClick()}).on("click",".hp-captcha-pic",function(){e._updateCaptcha()}).on("click",".hp-btn",function(){$(this).hasClass(a)||e._onRegisterBtnClick()}).on("click",".hp-back",function(){e.trigger("previous")}),"pc"===l.client?t.find(".hp-login-nav").hide():t.on("click",".hp-login-nav",function(){e.trigger("login")})},_toggleDtm:function(e){e&&this.interval||this.dtm[e?"removeClass":"addClass"](a)},showErrorOnField:function(e,t,i){this.currentTab.hpvalidator("showError",e,t,i)},_onRegisterBtnClick:function(){var e=this.currentTab;e.hpvalidator("valid")&&(this._switchRegisterButtonState(!0),"email"===this.currentMode?this.trigger("sendEmailData",{username:e.find(".hp-username").val(),email:e.find(".hp-email").val(),captchaCode:e.find(".hp-captcha").val(),password:e.find(".hp-password").val()}):this.trigger("sendMobileData",{mobile:e.find(".hp-mobileno").val(),username:e.find(".hp-username").val(),captchaCode:e.find(".hp-captcha").val(),mobileCode:e.find(".hp-dtm").val(),password:e.find(".hp-password").val()}))},_switchRegisterButtonState:function(e){var t=this.currentTab.find(".hp-btn");e?t.addClass(a).text(o):t.removeClass(a).text(c)},_initDtmInterval:function(e){var t=this,i=60;t.interval&&window.clearInterval(t.interval),t.interval=setInterval(function(){e.text("重新获取("+i.toString()+"s)"),0>=i&&(e.text("获取动态码").removeClass(a),t._renderCaptcha(),clearInterval(t.interval),t.interval=null),i--},1e3)},_updateCaptcha:function(e){s.update(),this._renderCaptcha()},_renderCaptcha:function(){this.element.find(".hp-captcha-pic").html(s.render())},_showCaptcha:function(){this.currentTab.find(".hp-input-captcha").removeClass(r).find(".hp-captcha").removeAttr("disabled")},_switchCaptcha:function(){this.isShowCaptcha&&this.isShowCaptcha[this.currentMode]&&this._showCaptcha()},_updateTimer:function(){this.interval&&(window.clearInterval(this.interval),this.interval=null,this.element.find(".hp-dtm-get").text("获取动态码").removeClass(a))},update:function(e){this.focus()},focus:function(e){this.currentTab.find("input:visible").first().focus()}})},function(e,t){},,function(e,t,i){t.Dialog=i(39),t.Tabs=i(40),t.Errortip=i(2),t.Validator=i(22),t.Strength=i(42),t.Input=i(23)},function(e,t,i){var n=i(3),s=i(26).keyCode;e.exports=n.extend("Dialog",{options:{width:500,closeOnEsc:!0,closeOnOverlay:!0,showTitle:!1,modal:!0,minHeight:150,minWidth:150,animation:!1,zIndex:1000001,beforeClose:null,open:null,close:null},render:function(){var e,t=this,i=t.options;this.widget=e=$("<div>").addClass("hp-dialog").css({display:"none",zIndex:i.zIndex}).attr("tabIndex",-1).width(i.width||500).bind({keydown:function(e){i.closeOnEsc&&e.keyCode===s.ESC&&(t.close(),e.preventDefault())}}).appendTo("body"),this.element.addClass("hp-content").show().appendTo(e),i.showTitle&&this._createTitle()},widget:function(){return this.widget},_createTitle:function(){var e=this,t=(e.options,this.widget),i='<div class="hp-dialog-header"></div>';this.header=$(i).bind("mousedown",function(){t.focus()}).prependTo(t),t=this.header,this.$closeBtn=$('<div class="hp-close"></div>').click(function(){e.close()}).appendTo(t)},_createOverlay:function(){var e=this,t=function(){return{height:$(document).height()+"px"}};return $(window).bind("resize.dialog",function(){e.overlay.css({height:0}).css(t()),e._setPosition()}),$("<div class='hp-overlay'>").click(function(){e.options.closeOnOverlay&&e.close()}).appendTo(document.body).css(t())},reset:function(){return this._setPosition()},_setPosition:function(){var e,t,i=this,n=i.options,s=this.widget,a=n.position,r=$(window).width(),o=$(window).height(),c="fixed"!==s.css("position")?$(window).scrollTop():0;e=a&&!isNaN(a.top)?a.top:o/2-s.outerHeight(!0)/2+c,t=a&&!isNaN(a.left)?a.left:r/2-s.outerWidth(!0)/2,s.css({left:t,top:e})},open:function(){if(!this.isOpen){var e=this,t=this.options;return this.overlay=t.modal?this._createOverlay():null,this._setPosition(),this.widget.show(),e.widget.focus(),this.isOpen=!0,this._trigger("open",null,null),this}},close:function(){return this.isOpen&&this._trigger("beforeClose",null)!==!1?(this.isOpen=!1,this.overlay&&this.overlay.remove(),this.widget.hide(),this._trigger("close",null,null),this):void 0}})},function(e,t,i){var n=i(3),s=(i(41),i(7));e.exports=n.extend("Tabs",{options:{active:0,selectedIndexChanged:null},render:function(){this._renderPanels(),this._bindEvents(),this.setActiveTab(this.options.active)},_renderPanels:function(){var e=this;e.panels=$(),e.tabs=this.element.find(">ul>li"),e.tabs.each(function(t){var i=$(this),n=i.attr("data-panel"),s=e.element.find("#"+n);s.length&&(e.panels=e.panels.add(s))})},setActiveTab:function(e){var t=this.tabs.eq(e||0),i=t.attr("data-panel"),n=this.element.find("#"+i);t.hasClass("hp-tab-selected")||(this.tabs.removeClass("hp-tab-selected"),this.panels.hide(),t.addClass("hp-tab-selected"),n.show(),this._trigger("selectedIndexChanged",null,{index:e}))},_bindEvents:function(){var e=this;"mobile"===s.client?e.element.find("li").tap(function(t){e.setActiveTab($(this).index())}):e.element.delegate("li",{click:function(t){e.setActiveTab($(this).index())}}).delegate("li a",{click:function(e){e.preventDefault()}})}})},function(e,t){var i="ontouchend"in document.createElement("div");$.fn.tap=function(e){var t=this,n=i?"touchstart":"mousedown",s=i?"touchmove":"mousemove",a=i?"touchend":"mouseup";return t.each(function(){var t={};t.target=this,$(t.target).on(n,function(e){var n="touches"in e?e.touches[0]:i?window.event.touches[0]:window.event;t.startX=n.clientX,t.startY=n.clientY,t.endX=n.clientX,t.endY=n.clientY,t.startTime=+new Date}),$(t.target).on(s,function(e){var n="touches"in e?e.touches[0]:i?window.event.touches[0]:window.event;t.endX=n.clientX,t.endY=n.clientY}),$(t.target).on(a,function(i){if(+new Date-t.startTime<300&&Math.abs(t.endX-t.startX)+Math.abs(t.endY-t.startY)<20){var i=i||window.event;i.preventDefault(),e.call(t.target);
}t.startTime=void 0,t.startX=void 0,t.startY=void 0,t.endX=void 0,t.endY=void 0})}),t},e.exports={tap:$.fn.tap,enableTouch:i}},function(e,t,i){var n=i(3),s={none:0,weak:1,medium:2,strong:3},a="hp-input",r=a+" hp-input-bad",o=a+" hp-input-ok",c=a+" hp-input-good",l=/^(abc123|a1b2c3|aaa111|123qwe|p@ssword|passw0rd|trustno1)$/,p=/\d/,h=/[a-zA-Z]/,u=/[^0-9a-zA-Z]/;e.exports=n.extend("Strength",{render:function(){var e=this;this.strength=e.element.parent(".hp-input"),this.element.bind("paste keyup change input",function(){var t=$.trim(e.element.val());e.status(t)})},checkStrength:function(e){if(!e)return 0;if(l.test(e)||e.length<8)return 1;var t=0;return p.test(e)&&t++,h.test(e)&&t++,u.test(e)&&t++,t},status:function(e){var t=this.strength[0],i=this.checkStrength(e);switch(i){case s.weak:t.className=r;break;case s.medium:t.className=o;break;case s.strong:t.className=c;break;case s.none:default:t.className=a}}})},function(e,t){var i={login_qq:[2,1402],login_submit:[2,1403],login_failure:[2,1404],login_close:[2,1405],login_weibo:[2,1407],login_weixin:[2,1408],login_show:[2,1409],login_success_view:[2,1410],login_failure_view:[2,1411],login_close_witheixst:[2,1412],login_delexsit_witheixst:[2,1413],login_show_witheixst:[2,1414],login_retry_view:[2,1415],sync_login_success:[2,1474],sync_login_failure:[2,1475],register_email_to_mobile:[2,1441],register_email_close:[2,1442],register_email_show:[2,1443],register_email_submit:[2,1444],register_mobile_to_emal:[2,1424],register_mobile_close:[2,1425],register_mobile_sms:[2,1426],register_mobile_show:[2,1427],register_mobile_submit:[2,1428],register_success:[2,1400],register_success_close:[2,1446],register_success_fillinfo:[2,1447],register_success_show:[2,1448],register_success_choose:[2,1454],register_success_continue:[2,1455],register_success_goto_email:[2,1456],register_success_active_email:[2,1464],register_success_trial:[2,1465],interest_step2_close:[2,1449],interest_step2_show:[2,1450],interest_step1_choose:[2,1451],interest_step1_close:[2,1452],interest_step1_show:[2,1453],interest_step1_skip:[2,1457],interest_choose:[2,1431],interest_switch:[2,1432],interest_skep:[2,1433],forgot_password:[2,1406],resetpwd_qq:[2,1401],resetpwd_weibo:[2,1429],resetpwd_weixin:[2,1430],resetpwd_sms_get:[2,1416],resetpwd_sms_nextstep:[2,1417],resetpwd_sms_show:[2,1418],resetpwd_sms_submit:[2,1419],resetpwd_msg:[2,1420],resetpwd_complain:[2,1445],resetpwd_next:[2,1421],resetpwd_show:[2,1422],resetpwd_success:[2,1423],resetpwd_email_success:[2,1434],resetpwd_email_err_show:[2,1435],resetpwd_email_to_mailbox:[2,1436],resetpwd_email_next:[2,1437],resetpwd_email_show:[2,1438],resetpwd_email_retype:[2,1439],resetpwd_email_submit:[2,1440],"3rd_login_back":[2,1459],"3rd_login_register_new":[2,1460],"3rd_login_bind_click":[2,1461],"3rd_login_bind_submit":[2,1466],"3rd_login_bind_back":[2,1467]};e.exports={sendEvent:function(e,t,i){return"function"==typeof window.SendEvent?window.SendEvent(e,t,i):void 0},getBIHash:function(e){return{name:e.name,groupid:e.groupid,categoryid:e.category_id}},register:function(e){var t=this;$(e).delegate("[data-bi-point]","click",function(e){var n=$(this),s=n.attr("data-bi-point");i[s]&&t.fire(s)})},fire:function(e,t){if(!i[e])throw"Type "+e+" doesn't exsit!";var n=i[e];this.sendEvent.call(this,n[0],n[1],t)}}},function(e,t,i){var n=i(24),s="hp-disabled";e.exports={_initPartial:function(){var e=this;this.element.on("click",".hp-dtm-get",function(){var t=$(this);if(!t.hasClass(s)){var i=e.currentTab.find("input.hp-captcha");if(i.length&&i.is(":visible")){var a=e.currentTab.hpvalidator("checkElement",i);if(!a)return}t.addClass(s),e._initDtmInterval($(this)),n.update(),e.trigger("getMessageCode",{mobile:e.currentTab.find(".hp-mobileno").val(),imgcode:e.currentTab.find(".hp-captcha").val(),sendtype:"register"===e.name?"register":"reset"})}})},_toggleDtm:function(e){e&&this.interval||this.element.find(".hp-dtm-get")[e?"removeClass":"addClass"](s)},_initDtmInterval:function(e){var t=this,i=60;t.interval&&window.clearInterval(t.interval),t.interval=setInterval(function(){e.text("重新获取("+i.toString()+"s)"),0>=i&&(e.text("获取动态码").removeClass(s),t._renderCaptcha(),clearInterval(t.interval),t.interval=null),i--},1e3)},_updateTimer:function(){this.interval&&(window.clearInterval(this.interval),this.interval=null,this.element.find(".hp-dtm-get").text("获取动态码").removeClass(s))}}},function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>注册沪江</span> <a href=javascript:; class="hp-right hp-login-nav">登录&nbsp;</a></div></div><div class=hp-section><div class=hp-section-pb><div class=hp-tabs><ul class="hp-tab-head hp-cf"><li data-panel=hp-reg-mobile data-bi-point=register_email_to_mobile><span>手机注册</span></li><li data-panel=hp-reg-email data-bi-point=register_mobile_to_emal><span>邮箱注册</span></li></ul><div class=hp-tab-body><div id=hp-reg-mobile><div class=hp-input><input class=hp-mobileno name=mobile data-enable-clean=true data-rule-cellphone=true data-rule-required=true type=tel maxlength=11 placeholder="手机号"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><div class="hp-input hp-input-half hp-input-captcha hp-hide"><input class=hp-captcha disabled maxlength=8 name=captcha data-rule-captcha=true data-rule-required=true placeholder="验证码"> <span class="hp-btn-half hp-captcha-pic"></span> <span class=hp-err-tips></span></div><div class="hp-input hp-input-half hp-input-dtm"><input class=hp-dtm maxlength=8 name=sms data-rule-required=true data-rule-sms=true placeholder="动态码"> <span class="hp-btn-half hp-dtm-get hp-disabled">获取动态码</span> <span class=hp-err-tips>动态码错误</span></div><div class=hp-input><input class=hp-username name=username data-enable-clean=true data-rule-username-start=true data-rule-username=true data-rule-required=true autocapitalize=off autocorrect=off autocomplete=false maxlength=20 placeholder="用户名"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><div class="hp-input hp-input-password"><input class=hp-password type=password name=password maxlength=20 data-rule-password-length=true data-rule-password=true data-rule-required=true maxlength=35 placeholder="密码（8-20位字符）"><p class="hp-pass-bars hp-cf"><span class="hp-pass-bar hp-pass-bar1"></span> <span class="hp-pass-bar hp-pass-bar2"></span> <span class="hp-pass-bar hp-pass-bar3"></span></p><span class=hp-err-tips></span> <span class=hp-flag></span></div><button class="hp-btn hp-btn-green" type=submit>注&nbsp;&nbsp;册</button></div><div id=hp-reg-email><div class=hp-input><input class=hp-email name=email data-enable-clean=true data-rule-required=true data-rule-email=true type=email maxlength=35 placeholder="邮箱"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><div class="hp-input hp-input-half hp-input-captcha hp-hide"><input class=hp-captcha disabled maxlength=8 name=captcha data-rule-captcha=true data-rule-required=true placeholder="验证码"> <span class="hp-btn-half hp-captcha-pic"></span> <span class=hp-err-tips></span></div><div class=hp-input><input class=hp-username name=username data-enable-clean=true data-rule-username-start=true data-rule-username=true data-rule-required=true autocapitalize=off autocorrect=off autocomplete=false maxlength=20 placeholder="用户名"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><div class="hp-input hp-input-password"><input class=hp-password type=password name=password maxlength=20 data-rule-password-length=true data-rule-password=true data-rule-required=true maxlength=35 placeholder="密码（8-20位字符）"><p class="hp-pass-bars hp-cf"><span class="hp-pass-bar hp-pass-bar1"></span> <span class="hp-pass-bar hp-pass-bar2"></span> <span class="hp-pass-bar hp-pass-bar3"></span></p><span class=hp-err-tips></span> <span class=hp-flag></span></div><button class="hp-btn hp-btn-green" type=submit>注&nbsp;&nbsp;册</button></div></div></div><div class="hp-info-tip hp-agreement">注册代表您已经阅读并同意<a href={{agreementLink}}>《沪江用户协议》</a></div></div></div></div>'},function(e,t,i){i(47);var n=i(9),s=(i(17),i(25)),a="hp-hidden";n.register("register-success",{template:i(49),templateInitData:{fillUserInfoUrl:i(26).fillUserInfoUrl},init:function(){var e=this;this.element.find(".hp-btn-continue").click(function(){e.trigger("continue")})},update:function(e){var t,i=this.element;switch(e.currentFlow){case"login-third":t="登录成功";break;case"register":t="恭喜您注册成功！";break;default:t="感谢您的配合"}i.find(".hp-thank-word").text(t),i.find(".hp-reg-success-username").text(e.username||""),this.trigger("getPushData",i.find(".hp-filled-content")),this._renderMail(e)},_renderMail:function(e){var t=this,n=this.element,s=n.find(".hp-btn-tomail");if(e.email){var r=e.email,o=r.substr(r.indexOf("@")),c=i(26).EMAIL_DOMAIN,l=c[o]||"http://www."+o.substr(1);s.removeClass(a).click(function(){t.trigger("emailClick",l)})}else s.hide(),n.find(".hp-btn-success").addClass("hp-btn-success-alone")},genPushMarkup:function(e){for(var t="",i=0;i<e.length;i++){var n=e[i];switch(n.textType){case"qq":t+='<a href="'+n.link+'" data-bi-type="'+n.textType+'" class="hp-external hp-cf hp-external-ad" target="_blank"><p class="hp-ex-title">'+n.title+'</p><p class="hp-ex-info hp-cf"><img src="'+n.img+'" alt="'+n.title+'"><span class="hp-ex-text">'+n.subTitle+'</span><span class="hp-ex-btn">一键加群</span></p></a>';break;case"banner":t+='<a href="'+n.link+'" data-bi-type="'+n.textType+'" class="hp-external hp-cf hp-external-banner" target="_blank">',t+='<img src="'+n.img+'" alt=""></a>';break;case"weixin":t+='<a href="'+n.link+'"  data-bi-type="'+n.textType+'" class="hp-external hp-cf hp-external-ad" target="_blank"><p class="hp-ex-title">'+n.title+'</p><p class="hp-ex-info hp-cf"><img src="'+n.img+'" alt="'+n.title+'"><span class="hp-ex-text">'+n.subTitle+"</span>",s.isPC?t+='<span class="hp-ex-text">打开微信，点击底部的“发现”,使用“扫一扫”即可关注。</span>':s.isMobile?t+='<span class="hp-ex-text">在微信中搜索公众号，即可关注我们~</span>':s.isWeixin&&(t+='<span class="hp-ex-text">长按二维码，点击“识别图中二维码”即可关注我们~</span>'),t+="</p></a>";break;case"adv":default:t+='<a href="'+n.link+'" data-bi-type="adv" class="hp-external hp-cf hp-external-ad" target="_blank"><p class="hp-ex-title">'+n.title+'</p><p class="hp-ex-info hp-cf"><img src="'+n.img+'" alt="'+n.title+'"><span class="hp-ex-text">'+n.subTitle+"</span></p></a>"}}return t}})},function(e,t){},,function(e,t){e.exports='<div class="hp-view hp-view-success"><div class=hp-section><div class=hp-banner><div class=hp-banner-text><span class="hp-icon hp-icon-smile"></span> <span class=hp-thank-word>感谢您的配合</span></div></div><div class=hp-filled-content></div><div class="hp-cf hp-btn-success"><a href=javascript:; class="hp-fl hp-btn-tomail">前往邮箱</a> <a href=javascript:; class="hp-fr hp-btn-continue" data-bi-point=register_success_continue>继续浏览</a></div></div></div>'},function(e,t,i){i(51);var n=i(9),s=(i(40),i(43),i(7)),a={1000:"中小幼",2000:"外语",3000:"留学",4000:"职场兴趣",5000:"口语",6000:"考试考证"},r=function(e){return a[e]};n.register("interest-select",{template:i(53),init:function(){var e=this,t=e.element,i=t.find(".hp-skip"),n=t.find(".hp-back");"mobile"===s.client?(t.delegate(".hp-interest li","touchstart",function(e){$(e.target).addClass("hp-grade-selected")}).delegate(".hp-interest li","touchend",function(e){$(e.target).removeClass("hp-grade-selected")}),t.find(".hp-interest li").tap(function(t){var i=$(this).attr("data-interest-id");setTimeout(function(){e.trigger("interestSelect",i)},300)})):t.delegate(".hp-interest li","click",function(t){var i=$(t.currentTarget).attr("data-interest-id");e.trigger("interestSelect",i)}),i.bind("click",function(t){e.trigger("skip")}),n.bind("click",function(t){e.trigger("previous")})},_switchCategory:function(e){var t=this.element.find(".hp-block");t.hide(),t.filter("[data-category="+e+"]").show()},update:function(e,t){e=e||1e3,this.element.find(".hp-cate-title").text(r(e)),this._switchCategory(e),t&&this.element.find(".hp-back").hide()}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><section class=hp-section><div class="hp-head hp-head-interest"><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3><span class=hp-cate-title>读取分类</span><span class=hp-gray>(单选)</span></span></div></div><div class=hp-body><div class="hp-block hp-interest-k12" data-category=1000><div class="hp-info hp-info-interest"><p>孩子正在哪个阶段？</p></div><div class=hp-interest><span class=hp-name>学龄前</span><ul class=hp-cf><li data-interest-id=1001><span>0-2岁</span></li><li data-interest-id=1002><span>3-4岁</span></li><li data-interest-id=1003><span>5-6岁</span></li></ul></div><div class=hp-interest><span class=hp-name>小学</span><ul class=hp-cf><li data-interest-id=1010><span>一年级</span></li><li data-interest-id=1011><span>二年级</span></li><li data-interest-id=1012><span>三年级</span></li><li data-interest-id=1013><span>四年级</span></li><li data-interest-id=1014><span>五年级</span></li><li data-interest-id=1015><span>六年级</span></li></ul></div><div class=hp-interest><span class=hp-name>中学</span><ul class=hp-cf><li data-interest-id=1020><span>初一</span></li><li data-interest-id=1021><span>初二</span></li><li data-interest-id=1022><span>初三</span></li><li data-interest-id=1030><span>高一</span></li><li data-interest-id=1031><span>高二</span></li><li data-interest-id=1032><span>高三</span></li></ul></div></div><div class="hp-block hp-interest-lang" data-category=5000><div class="hp-info hp-info-interest"><p>想修炼哪门技能？</p></div><div class=hp-interest><span class=hp-name>英语</span><ul class=hp-cf><li data-interest-id=5001><span>基础发音</span></li><li data-interest-id=5002><span>生活口语</span></li><li data-interest-id=5003><span>职场口语</span></li></ul></div><div class=hp-interest><span class=hp-name>日语</span><ul class=hp-cf><li data-interest-id=5010><span>基础发音</span></li><li data-interest-id=5011><span>生活口语</span></li><li data-interest-id=5012><span>职场口语</span></li></ul></div><div class=hp-interest><span class=hp-name>韩语</span><ul class=hp-cf><li data-interest-id=5020><span>基础发音</span></li><li data-interest-id=5021><span>生活口语</span></li><li data-interest-id=5022><span>职场口语</span></li></ul></div></div><div class="hp-block hp-interest-abroad" data-category=3000><div class="hp-info hp-info-interest"><p>要参加哪门考试？</p></div><div class=hp-interest><span class=hp-name></span><ul class=hp-cf><li data-interest-id=3001><span>雅思</span></li><li data-interest-id=3002><span>托福</span></li><li data-interest-id=3003><span>SAT</span></li><li data-interest-id=3004><span>GRE</span></li><li data-interest-id=3005><span>GMAT</span></li></ul></div></div><div class="hp-block hp-interest-career" data-category=2000><div class="hp-info hp-info-interest"><p>想学习哪门外语？</p></div><div class=hp-interest><span class=hp-name>英语</span><ul class=hp-cf><li data-interest-id=2001><span>零基础</span></li><li data-interest-id=2007><span>备考</span></li><li data-interest-id=2008><span>美剧英乐</span></li><li data-interest-id=2006><span>商务英语</span></li></ul></div><div class=hp-interest><span class=hp-name>日语</span><ul class=hp-cf><li data-interest-id=2017><span>零基础</span></li><li data-interest-id=2018><span>备考</span></li><li data-interest-id=2019><span>日剧动漫</span></li><li data-interest-id=2020><span>实用日语</span></li></ul></div><div class=hp-interest><span class=hp-name>其他</span><ul class=hp-cf><li data-interest-id=2036><span>韩语</span></li><li data-interest-id=2031><span>法语</span></li><li data-interest-id=2032><span>德语</span></li><li data-interest-id=2033><span>西语</span></li></ul></div></div><div class="hp-block hp-interest-oral" data-category=6000><div class="hp-info hp-info-interest"><p>要参加哪门考试？</p></div><div class=hp-interest><span class=hp-name>考试考证</span><ul class=hp-cf><li data-interest-id=6005><span>四六级</span></li><li data-interest-id=6006><span>商英</span></li><li data-interest-id=6017><span>中高口</span></li><li data-interest-id=6007><span>能力考</span></li><li data-interest-id=6008><span>Topik</span></li><li data-interest-id=6014><span>DELE</span></li><li data-interest-id=6015><span>德福</span></li><li data-interest-id=6013><span>TEF/TCF</span></li><li data-interest-id=6018><span>考研</span></li><li data-interest-id=6019><span>财会</span></li><li data-interest-id=6009><span>职称</span></li><li data-interest-id=6016><span>公务员</span></li></ul></div></div><div class="hp-block hp-interest-exam" data-category=4000><div class="hp-info hp-info-interest"><p>对什么感兴趣？</p></div><div class=hp-interest><span class=hp-name>职场提升</span><ul class=hp-cf><li data-interest-id=4012><span>求职面试</span></li><li data-interest-id=4005><span>办公软件</span></li><li data-interest-id=4013><span>行业技能</span></li><li data-interest-id=4014><span>管理方法</span></li></ul></div><div class=hp-interest><span class=hp-name>美好生活</span><ul class=hp-cf><li data-interest-id=4016><span>育儿</span></li><li data-interest-id=4017><span>理财</span></li><li data-interest-id=4006><span>读书</span></li><li data-interest-id=4007><span>摄影</span></li><li data-interest-id=4018><span>旅游</span></li><li data-interest-id=4009><span>绘画</span></li><li data-interest-id=4003><span>美妆瘦身</span></li><li data-interest-id=4015><span>影视音乐</span></li></ul></div></div></div><div class="hp-foot hp-cf"><div class=hp-fr><a href=javascript:; class="hp-gray-lighter hp-skip">跳过</a></div></div></section></div>'},function(e,t,i){i(55);var n=i(9),s=i(7);n.register("category-select",{template:i(59),init:function(){var e=this;this.element.on("click",".hp-login",function(t){e.trigger("login"),t.preventDefault()}).on("click",".hp-category a",function(t){e.trigger("selectCategory",$(t.currentTarget).attr("data-category-id")),t.preventDefault()}).on("click",".hp-back",function(){e.trigger("previous")}).find(".hp-skip").click(function(t){e.trigger("skip")}),"pc"===s.client&&this.element.find(".hp-back").hide()},update:function(e){e&&(this.element.find(".hp-fl").hide(),this.element.find(".hp-banner-title").text("沪江小调查"),this.element.find(".hp-banner-info").text("指尖轻触，只为贴心服务"))}})},function(e,t){},,,,function(e,t){e.exports='<div class=hp-view><div class="hp-head hp-head-category-select"><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>兴趣选择</span></div></div><div class=hp-section><div class="hp-banner hp-banner-slogan"></div><div class="hp-info hp-info-category"><span class="hp-icon hp-icon-arrow-down"></span><p>告诉我您最感兴趣的内容</p></div><div class=hp-category><ul class=hp-cf><li><a href=# class=hp-cate-blue2 data-category-id=5000><span class="hp-icon hp-icon-oral"></span> <span class=hp-name>口语</span></a></li><li><a href=# class=hp-cate-red data-category-id=3000><span class="hp-icon hp-icon-liuxue"></span> <span class=hp-name>留学</span></a></li><li><a href=# class=hp-cate-yellow data-category-id=1000><span class="hp-icon hp-icon-k12"></span> <span class=hp-name>中小幼</span></a></li><li><a href=# class=hp-cate-green3 data-category-id=2000><span class="hp-icon hp-icon-cate"></span> <span class=hp-name>外语学习</span></a></li><li><a href=# class=hp-cate-green3 data-category-id=6000><span class="hp-icon hp-icon-exam"></span> <span class=hp-name>考试考证</span></a></li><li><a href=# class=hp-cate-green3 data-category-id=4000><span class="hp-icon hp-icon-interest"></span> <span class=hp-name>职场兴趣</span></a></li></ul></div><div class="hp-foot hp-cf"><div class=hp-fl>已有帐号 <a href=javascript:; class="hp-green hp-login">立即登录</a></div><div class=hp-fr><a href=javascript:; class="hp-gray-lighter hp-skip">跳过</a></div></div></div></div>'},function(e,t,i){i(61);var n=i(9),s=i(63),a=i(28);n.register("login-third",[s,a],{template:i(64),init:function(){var e=this,t=e.element;t.hpvalidator({events:"focusin",validClass:""}),t.on("click",".hp-btn-register",function(t){e.trigger("accountBind")}).on("click",".hp-btn-no-account",function(t){e.toggleAccount("no")}).on("click",".hp-btn-has-account",function(t){e.toggleAccount("has")})},toggleAccount:function(e){var t=this.element.find(".hp-btn-no-account"),i=this.element.find(".hp-btn-has-account");"no"===e?(t.addClass("active"),i.removeClass("active"),this.element.find(".hp-register-action").show(),this.element.find(".hp-bind-action").hide()):(i.addClass("active"),t.removeClass("active"),this.element.find(".hp-register-action").hide(),this.element.find(".hp-bind-action").show())},getFields:function(){var e=this.element;return{userName:e.find(".hp-username").val(),password:e.find(".hp-password").val(),imgcode:e.find(".hp-captcha").val()}},update:function(e,t,i){var n=this.element,s="";t&&n.find(".hp-user-name").text(t),e&&n.find(".hp-user-avatar").attr("src",e),i&&("weixin"===i||"wechat"===i?(this.submitBtn.text("绑定微信"),s="微信"):"qq"===i?(this.submitBtn.text("绑定"),s="QQ"):(this.submitBtn.text("绑定"),s="微博"),n.find(".hp-platform").text(s))}})},function(e,t){},,function(e,t){var i="hp-disabled";e.exports={_initPartial:function(){var e,t=this;e=t.element,e.find("input").hpinput(),e.on("click",".hp-back",function(e){t.trigger("previous")}).on("keyup","input",function(e){13===e.keyCode&&t.handleSubmit()}),this.submitBtn=e.find(".hp-submit-btn").click(function(){t.handleSubmit()})},getFields:function(){return{}},handleSubmit:function(){var e=this,t=e.element;!this.submitBtn.hasClass(i)&&t.hpvalidator("valid")&&e.trigger("submit",e.getFields())},disableSubmit:function(e){this.submitBtn[e?"addClass":"removeClass"](i)},update:function(){this.element.find("input:visible").first().focus(),this._updateForm()},reset:function(){this.element.find("input").val("")},_updateForm:function(){}}},function(e,t){e.exports='<div class=hp-view><div class=hp-section><div class="hp-head hp-head-interest"><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>登录沪江</span></div></div><div class=login-third-container><div class=hp-login-third><div class=hp-user><img class=hp-user-avatar alt=头像 src="//i2.hjfile.cn/f96/92/85/34819285.jpg"><div class=hp-user-name>第三方登录后的用户名</div></div><div class=hp-btns><button class="hp-btn hp-btn-no-account">无沪江帐号</button> <button class="hp-btn hp-btn-has-account">有沪江帐号</button></div><div class=hp-btn-actions><div class="hp-register-action hp-hide"><p class="hp-login-tip hp-desktop">*点击注册按钮，自动生成一个同名沪江帐号并绑定<span class=hp-platform>微信</span>号。今后可以通过<span class=hp-platform>微信</span>直接登录。</p><button class="hp-btn hp-btn-green hp-btn-auto hp-btn-register">注&nbsp;册</button><p class="hp-login-tip hp-mobile">*点击注册按钮，自动生成一个同名沪江帐号并绑定<span class=hp-platform>微信</span>号。今后可以通过<span class=hp-platform>微信</span>直接登录。</p></div><div class="hp-bind-action hp-hide"><div class="hp-input hp-input-username"><input class=hp-username name=username autocomplete=off autocapitalize=off autocorrect=off data-enable-clean=true data-rule-required=true placeholder="手机号/用户名/邮箱"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><div class=hp-input><input type=password class=hp-password name=password data-rule-required=true maxlength=20 placeholder="密码"> <span class=hp-err-tips>密码错误提示</span></div><div class="hp-input hp-input-half hp-input-captcha hp-hide"><input class=hp-captcha disabled maxlength=8 name=captcha data-rule-captcha=true data-rule-required=true placeholder="验证码"> <span class="hp-btn-half hp-captcha-pic"></span> <span class=hp-err-tips></span></div><p class="hp-login-tip hp-desktop">* 将沪江帐号与<span class=hp-platform>微信</span>绑定</p><button class="hp-btn hp-btn-green hp-btn-auto hp-btn-bind hp-submit-btn">绑定</button><p class="hp-login-tip hp-mobile">* 将沪江帐号与<span class=hp-platform>微信</span>绑定</p></div></div></div></div></div></div>'},function(e,t,i){i(66);var n=i(9),s=i(63);n.register("login-third-bind",[s],{template:i(68),init:function(){var e=this.element;e.hpvalidator({events:"focusin",validClass:"",fields:{username:{events:"focusin, focusout"}}})},getFields:function(){var e=this.element;return{userName:e.find(".hp-username").val()}},update:function(e){e&&this.element.find(".hp-username").val(e.uname)}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><div class=hp-section><div class="hp-head hp-head-interest"><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>登录沪江</span></div></div><div class=login-third-container><div class=hp-login-third-inputs><div class=hp-input><input class=hp-username name=username data-enable-clean=true data-rule-username-start=true data-rule-username=true data-rule-required=true autocapitalize=off autocorrect=off autocomplete=false maxlength=20 placeholder="用户名"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><button class="hp-btn hp-submit-btn hp-btn-green hp-btn-auto" type=submit>注&nbsp;册</button></div></div></div></div>'},function(e,t,i){i(70);var n=i(9);i(17),i(25);n.register("login-third-success",{template:i(72),init:function(){var e=this;this.element.find(".hp-btn-continue").click(function(){e.trigger("continue")})},update:function(e){}})},function(e,t){},,function(e,t){e.exports='<div class="hp-view hp-register-success"><div class=hp-section><div class=hp-success><div class=hp-success-text><span class="hp-icon hp-icon-success"></span> <span class=hp-thank-word>登录成功</span></div></div><div class=qrcode><p class=qrcode-text>关注公众号“沪江”（ hujiang4u ）管理帐号信息并享受优质学习服务</p><img class=qrcode-img src="//res.hjfile.cn/co/pass/images/wechat.png"></div><button class="hp-btn hp-btn-green hp-btn-auto hp-btn-continue">继续浏览</button></div></div>'},function(e,t,i){i(74);var n=i(9),s=i(27);n.register("resetpwd-choose",[s],{template:i(76),init:function(){var e=this,t=e.element;t.on("click",".hp-sms",function(t){e.trigger("smsSelect")}).on("click",".hp-email",function(t){e.trigger("emailSelect")}).on("click",".hp-back",function(t){e.trigger("previous")})}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>选择密码重置方式</span></div></div><div class=hp-section><div class=hp-reset-choose><div class="hp-list hp-cf"><a class=hp-sms href=javascript:void(0)><p><span class="hp-icon hp-icon-sms"></span></p><span class=hp-name>短信</span></a> <a class=hp-email href=javascript:void(0)><p><span class="hp-icon hp-icon-email"></span></p><span class=hp-name>邮箱</span></a></div></div><div class=hp-third-login><span class=hp-hide>第三方登录</span><div class="hp-list hp-cf"><a class=hp-wechat target=_blank data-bi-point=login_weixin><p><span class="hp-icon hp-icon-weixin"></span></p><span class=hp-name>微信</span></a> <a class=hp-qq target=_blank data-bi-point=login_qq><p><span class="hp-icon hp-icon-qq"></span></p><span class=hp-name>QQ</span></a> <a class=hp-weibo target=_blank data-bi-point=login_weibo><p><span class="hp-icon hp-icon-weibo"></span></p><span class=hp-name>微博</span></a></div></div></div></div>'},function(e,t,i){i(78);var n=i(9),s=i(63),a=i(28),r=i(44);n.register("resetpwd-sms",[s,a,r],{template:i(80),init:function(){var e=this,t=e.element,i=function(t){var i=this,n=$(t.element).val();t.validated===!0?e.trigger("checkNotExist","mobile",n,function(t,n){t?(e._toggleDtm(!0),i.showValid("mobile",!0)):(e._toggleDtm(!1),i.showError("mobile",n,!0))}):e._toggleDtm(!1)};e.currentTab=e.element,t.hpvalidator({fields:{mobile:{validated:i}}})},getFields:function(){var e=this.element;return{mobile:e.find("[name=mobile]").val(),msgcode:e.find("[name=sms]").val()}}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>短信重置密码</span></div></div><div class=hp-section><div class=hp-section-pb><div class=hp-input><input class=hp-mobileno name=mobile data-enable-clean=true data-rule-cellphone=true data-rule-required=true type=tel maxlength=11 placeholder="手机号"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><div class="hp-input hp-input-half hp-input-captcha hp-hide"><input class=hp-captcha disabled maxlength=8 name=captcha data-rule-captcha=true data-rule-required=true placeholder="验证码"> <span class="hp-btn-half hp-captcha-pic"></span> <span class=hp-err-tips></span></div><div class="hp-input hp-input-half hp-input-dtm"><input class=hp-dtm maxlength=8 name=sms data-rule-required=true data-rule-sms=true placeholder="动态码"> <span class="hp-btn-half hp-dtm-get hp-disabled">获取动态码</span> <span class=hp-err-tips>动态码错误</span></div><button class="hp-btn hp-btn-green hp-submit-btn">下一步</button><div class=hp-info-tip>选择问题？请 <a href="http://kefu.hujiang.com/feedback/" target=_blank data-external-link=true data-bi-point=resetpwd_msg class=hp-green>留言</a>，或者进行 <a href="http://kefu.hujiang.com/shensu/" data-external-link=true target=_blank class=hp-green data-bi-point=resetpwd_complain>帐号申诉</a></div></div></div></div>'},function(e,t,i){i(82);var n=i(9),s=i(63),a=i(28);n.register("resetpwd-email",[s,a],{template:i(84),init:function(){var e=this,t=e.element,i=function(t,i){if(i.validated!==!1){var n=this;e.trigger("checkNotExist",t,$(i.element).val(),function(e,i){e?n.showValid(t):n.showError(t,i,!0)})}},n={events:"focusin,focusout",validated:function(e){i.call(this,"email",e)}};t.hpvalidator({fields:{email:n}})},getFields:function(){var e=this.element;return{email:e.find("[name=email]").val(),imgcode:e.find("[name=captcha]").val()}},_updateForm:function(){this._updateCaptcha(),this._showCaptcha(!0)}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>邮箱重置密码</span></div></div><div class=hp-section><div class=hp-section-pb><div class=hp-input><input class=hp-email name=email data-enable-clean=true data-rule-required=true data-rule-email=true type=email maxlength=35 placeholder="邮箱"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><div class="hp-input hp-input-half hp-input-captcha hp-hide"><input class=hp-captcha disabled maxlength=8 name=captcha data-rule-captcha=true data-rule-required=true placeholder="验证码"> <span class="hp-btn-half hp-captcha-pic"></span> <span class=hp-err-tips></span></div><button class="hp-btn hp-btn-green hp-submit-btn">下一步</button><div class=hp-info-tip>选择问题？请 <a href="http://kefu.hujiang.com/feedback/" target=_blank data-external-link=true data-bi-point=resetpwd_msg class=hp-green>留言</a>，或者进行 <a href="http://kefu.hujiang.com/shensu/" data-external-link=true target=_blank class=hp-green data-bi-point=resetpwd_complain>帐号申诉</a></div></div></div></div>'},function(e,t,i){i(86);var n=i(9),s="hp-hide";n.register("resetpwd-email-validate",{template:i(88),init:function(){var e=this;this.element.on("click",".hp-back",function(){e.trigger("previous")})},update:function(e){var t=this,n=this.element.find(".hp-btn-mailbox"),a=e.email,r=a.substr(a.indexOf("@")),o=i(26).EMAIL_DOMAIN,c=o[r]||"http://www."+r.substr(1);this.element.find(".hp-mail-addr").text(a),n.removeClass(s).click(function(){t.trigger("emailClick",c)})}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>邮箱重置密码</span></div></div><div class="hp-section hp-reset-email-validate"><div class=hp-section-pb><div class=hp-ps><p class=hp-p1>确认邮件已发往邮箱</p><p class="hp-p2 hp-mail-addr"></p></div><button class="hp-btn hp-btn-green hp-btn-mailbox">前往邮箱确认</button><div class=hp-info-tip>选择问题？请 <a href="http://kefu.hujiang.com/feedback/" target=_blank data-external-link=true data-bi-point=resetpwd_msg class=hp-green>留言</a>，或者进行 <a href="http://kefu.hujiang.com/shensu/" data-external-link=true target=_blank class=hp-green data-bi-point=resetpwd_complain>帐号申诉</a></div></div></div></div>'},function(e,t,i){i(90);var n=i(9),s=i(63);n.register("resetpwd-reset",[s],{
template:i(92),init:function(){var e=this,t=e.element;t.find("[name=password]").hpstrength(),t.hpvalidator({rules:{password_nocheck:{equal:e.element.find("[name=password]")}},messages:{password_nocheck:{equal:"两次密码输入不一致"}}})},getFields:function(){this.element;return{password:this.element.find(".hp-password").val()}},update:function(e){var t=e&&e.username;this.element.find(".hp-username").text(t)}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>密码重置</span></div></div><div class=hp-section><div class=hp-section-pb><div class=hp-input><div class=hp-p>用户名：<span class=hp-username></span></div></div><div class="hp-input hp-input-password"><input class=hp-password type=password name=password maxlength=20 data-rule-password-length=true data-rule-password=true data-rule-required=true maxlength=35 placeholder="密码（8-20位字符）"><p class="hp-pass-bars hp-cf"><span class="hp-pass-bar hp-pass-bar1"></span> <span class="hp-pass-bar hp-pass-bar2"></span> <span class="hp-pass-bar hp-pass-bar3"></span></p><span class=hp-err-tips></span> <span class=hp-flag></span></div><div class="hp-input hp-input-password"><input type=password class=hp-password name=password_nocheck data-rule-required=true maxlength=20 placeholder="确认密码"> <span class=hp-err-tips></span> <span class=hp-flag></span></div><button class="hp-btn hp-btn-green hp-submit-btn">下一步</button><div class=hp-info-tip>选择问题？请 <a href="http://kefu.hujiang.com/feedback/" target=_blank data-external-link=true data-bi-point=resetpwd_msg class=hp-green>留言</a>，或者进行 <a href="http://kefu.hujiang.com/shensu/" data-external-link=true target=_blank class=hp-green data-bi-point=resetpwd_complain>帐号申诉</a></div></div></div></div>'},function(e,t,i){i(94);var n=i(9);n.register("resetpwd-success",{template:i(96),init:function(){var e=this;this.element.on("click",".hp-btn",function(){e.trigger("toLogin")}).on("click",".hp-back",function(){e.trigger("previous")})}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>密码重置成功</span></div></div><div class="hp-section hp-reset-success"><div class=hp-section-pb><p class=hp-p><span class="hp-icon hp-icon-smile-green"></span><br>请妥善保存您的密码</p><button class="hp-btn hp-btn-green">立即登录</button><div class=hp-info-tip>选择问题？请 <a href="http://kefu.hujiang.com/feedback/" target=_blank data-external-link=true data-bi-point=resetpwd_msg class=hp-green>留言</a>，或者进行 <a href="http://kefu.hujiang.com/shensu/" data-external-link=true target=_blank class=hp-green data-bi-point=resetpwd_complain>帐号申诉</a></div></div></div></div>'},function(e,t,i){i(98);var n=i(9);n.register("resetpwd-fail",{template:i(100),init:function(){var e=this;this.element.on("click",".hp-btn",function(){e.trigger("previous")}).on("click",".hp-back",function(){e.trigger("previous")})}})},function(e,t){},,function(e,t){e.exports='<div class=hp-view><div class=hp-head><div class="hp-title hp-cf"><div class="hp-left hp-back"><span class="hp-icon hp-icon-arrow-left"></span></div><span class=hp-h3>密码重置失败</span></div></div><div class="hp-section hp-reset-success"><div class=hp-section-pb><p class=hp-p><span class="hp-icon hp-icon-unhappy"></span><br>您的第三方帐号尚未绑定过任何沪江帐号<br>重新选择密码找回方式</p><button class="hp-btn hp-btn-green">重新选择</button><div class=hp-info-tip>选择问题？请 <a href="http://kefu.hujiang.com/feedback/" target=_blank data-external-link=true data-bi-point=resetpwd_msg class=hp-green>留言</a>，或者进行 <a href="http://kefu.hujiang.com/shensu/" data-external-link=true target=_blank class=hp-green data-bi-point=resetpwd_complain>帐号申诉</a></div></div></div></div>'},function(e,t,i){function n(e){v[e]&&f.fire(v[e],{login:!!p.setInterest})}function s(e){return e===u.LOGIN?h.skipsOnLogin:e===u.REGISTER?h.skips:e===u.LOGIN_THIRD?h.skipsOnThird:[]}function a(e){var t=s(p.currentFlow);if(!t)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return!0;return!1}function r(e){return e===u.LOGIN?m:e===u.REGISTER?g:e===u.LOGIN_THIRD?w:[]}function o(e){for(var t=r(p.currentFlow),i=t.length,n=e,s=!1,o=0;i>o;o++){var c=t[o];if(c===e||s){if(s=!0,!a(c)){n=c;break}n="",l[c].skiped()}}return n}function c(e,t,i){var e=o(e);if(""!==e){var s=l[e];p.currentAction&&p.currentAction.view.element.hide(),p.currentAction=s,s.load.call(s,t),"popup"===p.mode&&p.element.hpdialog("reset"),s.fireBI?s.fireBI.call(s):n(e),"inline"===p.mode&&"mobile"===h.client&&!i&&history&&history.pushState&&(_?(p.firstView=e,p.firstViewOpts=t,p.firstFlow=p.currentFlow):history.pushState({name:e,currentFlow:p.currentFlow},"","#"+e)),_=!1,p.name=e}}var l={},p=i(4),h=(i(8),i(7)),u=i(5).flow,d=i(5).actions,f=i(43),v={login:"login_show","category-select":"interest_step1_show","interest-select":"interest_step2_show","login-transfer":"login_success_view"},g=["category-select","interest-select","register","register-success"],m=["login","login-transfer","category-select","interest-select"],w=["login-third","login-third-bind","login-third-success","category-select","interest-select"],_=!0;e.exports={actions:l,switchToView:c,switchToFlow:function(e,t,i){p.currentFlow=e;var n="";switch(e){case u.LOGIN:n=d.LOGIN;break;case u.REGISTER:n=d.CATE_SELECT;break;case u.RESETPWD:n=t&&t.fromThird?t.IsBind?d.RESETPWD_RESET:d.RESETPWD_FAIL:d.RESETPWD_CHOOSE;break;case u.LOGIN_THIRD:n=d.LOGIN_THIRD;break;default:n=d.LOGIN}c(n,t,i)}}},function(e,t,i){i(103),i(109),i(111),i(112),i(113),i(114),i(115),i(117),i(118),i(119),i(120),i(122),i(123),i(124),i(125),i(126),e.exports={action:i(6)}},function(e,t,i){var n=i(6),s=i(5).actions,a=i(5).flow,r=i(104),o=i(4),c=i(24),l=i(7),p=(i(25),i(106)),h=i(107),u=i(43),d=i(26),f=i(1),v=i(108);n.register(s.LOGIN,[v],{init:function(){var e=this.view;this._initAvatar(),r.isShowLoginCaptcha().success(function(t){t.Data&&t.Data.Result&&(e._showCaptcha(!0),e._updateCaptcha())})},__previous:function(){n.historyBack()},__registerClick:function(){n.switchToFlow(a.REGISTER)},__switchAvatar:function(e){o.isNewUser=!e},__clear:function(){this._cleanUserCache()},__trialLogin:function(){r.trialLoginOnApp(function(e){HJSDK.invokeOriginally("navigator_closeWindow")})},__closeView:function(){n.redirect()},__forgotPwd:function(){n.switchToFlow(a.RESETPWD)},__login:function(e){var t=this,i=this.view,a=t._getUserInfoFormCache();e.userName=e.userName||a.uname,e.token=c.token||"";e.password;e.password=h(e.password),r.login(e).success(function(e){var t=null===e.Data.UserTag,a=function(){i.disableSubmit(!1),o.setInterest=t,t?n.switchToView(s.CATE_SELECT,!0):n.switchToView(s.LOGIN_TRANSFER)};r.syncLogin(e.Data,function(){u.fire("sync_login_success",{logintype:"uname"}),a()},function(){u.fire("sync_login_failure",{logintype:"uname"}),i.disableSubmit(!1)})}).failure(function(e,t){f.showErrorMessage(t,e,i),u.fire("login_failure",{errorcode:t}),i.disableSubmit(!1)})},_cleanUserCache:function(){p.removeCookie(d.uidCookie),p.removeCookie(d.unameCookie)},_getUserInfoFormCache:function(){l.previous_user_info;return{uname:decodeURIComponent(p.getCookie(d.unameCookie)),uid:p.getCookie(d.uidCookie)}},_initAvatar:function(){var e=this,t=e._getUserInfoFormCache(),i=t.uname,n=t.uid,s=!1;i&&n&&(s=!0,e.view.updateAvatar(i,r.getAvatar(n),t.pwd)),e.view._switchAvatar(s)},show:function(){this.view.show()}})},function(e,t,i){var n,s,a=i(105),r=i(26),o=i(7),c=(i(4),i(25)),l=r.genAPIUrl;n=function(e,t,i){return a.get(l(e),t)},e.exports={login:function(e){return n("Login",e)},getUserInfo:function(){return a.get(l("GetUserInfo"))},getOauthLoginUrl:function(e){return a.get(l("getoauthloginurl"),e)},isShowLoginCaptcha:function(){return a.get(l("LoginCodeCaptcha"))},checkUserName:function(e,t){return a.get(l("checkUserName"),{userName:e,checkType:t})},checkNotExist:function(e,t){return a.get(l("CheckEmailOrMobile"),{userinfo:e,checkType:t})},sendMessage:function(e){return a.get(l("SendMsg"),e)},register:function(e){return n("Register",e)},isShowRegisterCaptcha:function(){return a.get(l("isShowCode"))},syncLogin:function(e,t,i){var n,s,a=r.SSODomains,o=a.length,c=e.ticket,l=0,p=function(e){l++,l==o&&(s&&clearTimeout(s),t(!0))};s=setTimeout(function(){t(!1)},1e4);for(var h=0;o>h;h++)n=r.getAPISLD()+"."+a[h]+"/quick/synclogin.aspx",$.get(n,{token:c,reg3rd:e.reg3rd,remeberdays:14},p,"jsonp")},findPwdByEmail:function(e){return a.get(l("FindSendEmail"),e)},findPwdByMobile:function(e){return a.get(l("FindByMobile"),e)},updatePwd:function(e){return a.get(l("UpdateUserPassword"),e)},oauthRegister:function(e){return n("OauthRegister",e)},oauthLogin:function(e){return n("OauthBind",e)},setTag:function(e){return a.get(l("UpdateUserTag"),{categoryid:e})},getPushData:function(){return a.get(l("PushDataLoad"),{format:"json",platformType:c.device,click_url:o.redirectURL})},recordThirdInfos:function(e){return n("AppOauthUserToCache",e)},thirdLoginOnApp:function(e,t){s.invoke("account_getSocialInfo",{platform:e},function(e){t.call(null,e)})},trialFromRegister:function(e){return n("ConvertByRegister",e,{is_trial:!0})},trialFromThird:function(e){return n("ConvertByOauth",e,{is_trial:!0})},trialLoginOnApp:function(e){s.invoke("ui_loading",{action:"show"}),s.invoke("account_trialLogin",function(t){s.invoke("ui_loading",{action:"hide"}),e.call(null,t)})},getAvatar:function(e){var t=e.toString(),i=e.length,n="0000",s="//i2.hjfile.cn/f48/";return 4>i&&(t=n.substring(0,4-i)+t,i=4),s+t.substr(i-4,2)+"/"+t.substr(i-2,2)+"/"+t+".jpg"}}},function(e,t,i){function n(e,t){var i=[],n=[],s=[],a=function(e){$.each(i,function(i,n){return n.call(t,e)})},r=function(e){var i,s;e.Code?(i=e.Message,s=e.Code):(i=e.statusText,s=e.status),$.each(n,function(e,n){return n.call(t,i,s)})},o=function(e){$.each(s,function(i,n){return n.call(t,e)})};return e.success=function(e){0===e.Code?a(e):r(e)},e.error=function(e){r(e)},e.complete=function(e){o(e)},{success:function(e){return i.push(e),this},failure:function(e){return n.push(e),this},complete:function(e){return s.push(e),this}}}function s(e){return function(t,i,s){s=s||{};var a={success:$.noop,error:$.noop},r=n(a,s),o=$.ajax({type:e,url:t,data:i,dataType:"jsonp",success:a.success,error:a.error,complete:a.complete});return s.xhr=o,r}}e.exports={post:s("post"),get:s("get")}},function(e,t){function i(e){var t=document.cookie.indexOf(e+"="),i=t+e.length+1;if(!t&&e!=document.cookie.substring(0,e.length))return void 0;if(-1==t)return void 0;var n=document.cookie.indexOf(";",i);return-1==n&&(n=document.cookie.length),decodeURIComponent(document.cookie.substring(i,n))}function n(e,t,i,n,s,a){i=i||864e5;var r=new Date((new Date).getTime()+i);document.cookie=e+"="+encodeURIComponent(t)+(i?";expires="+r.toGMTString():"")+(n?";path="+n:"")+(s?";domain="+s:"")+(a?";secure":"")}function s(e,t,n){i(e)&&(document.cookie=e+"="+(t?";path="+t:"")+(n?";domain="+n:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")}e.exports={getCookie:i,setCookie:n,removeCookie:s}},function(e,t){function i(e){return u(n(h(e),e.length*f))}function n(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,s=-1732584194,p=271733878,h=0;h<e.length;h+=16){var u=i,d=n,f=s,v=p;i=a(i,n,s,p,e[h+0],7,-680876936),p=a(p,i,n,s,e[h+1],12,-389564586),s=a(s,p,i,n,e[h+2],17,606105819),n=a(n,s,p,i,e[h+3],22,-1044525330),i=a(i,n,s,p,e[h+4],7,-176418897),p=a(p,i,n,s,e[h+5],12,1200080426),s=a(s,p,i,n,e[h+6],17,-1473231341),n=a(n,s,p,i,e[h+7],22,-45705983),i=a(i,n,s,p,e[h+8],7,1770035416),p=a(p,i,n,s,e[h+9],12,-1958414417),s=a(s,p,i,n,e[h+10],17,-42063),n=a(n,s,p,i,e[h+11],22,-1990404162),i=a(i,n,s,p,e[h+12],7,1804603682),p=a(p,i,n,s,e[h+13],12,-40341101),s=a(s,p,i,n,e[h+14],17,-1502002290),n=a(n,s,p,i,e[h+15],22,1236535329),i=r(i,n,s,p,e[h+1],5,-165796510),p=r(p,i,n,s,e[h+6],9,-1069501632),s=r(s,p,i,n,e[h+11],14,643717713),n=r(n,s,p,i,e[h+0],20,-373897302),i=r(i,n,s,p,e[h+5],5,-701558691),p=r(p,i,n,s,e[h+10],9,38016083),s=r(s,p,i,n,e[h+15],14,-660478335),n=r(n,s,p,i,e[h+4],20,-405537848),i=r(i,n,s,p,e[h+9],5,568446438),p=r(p,i,n,s,e[h+14],9,-1019803690),s=r(s,p,i,n,e[h+3],14,-187363961),n=r(n,s,p,i,e[h+8],20,1163531501),i=r(i,n,s,p,e[h+13],5,-1444681467),p=r(p,i,n,s,e[h+2],9,-51403784),s=r(s,p,i,n,e[h+7],14,1735328473),n=r(n,s,p,i,e[h+12],20,-1926607734),i=o(i,n,s,p,e[h+5],4,-378558),p=o(p,i,n,s,e[h+8],11,-2022574463),s=o(s,p,i,n,e[h+11],16,1839030562),n=o(n,s,p,i,e[h+14],23,-35309556),i=o(i,n,s,p,e[h+1],4,-1530992060),p=o(p,i,n,s,e[h+4],11,1272893353),s=o(s,p,i,n,e[h+7],16,-155497632),n=o(n,s,p,i,e[h+10],23,-1094730640),i=o(i,n,s,p,e[h+13],4,681279174),p=o(p,i,n,s,e[h+0],11,-358537222),s=o(s,p,i,n,e[h+3],16,-722521979),n=o(n,s,p,i,e[h+6],23,76029189),i=o(i,n,s,p,e[h+9],4,-640364487),p=o(p,i,n,s,e[h+12],11,-421815835),s=o(s,p,i,n,e[h+15],16,530742520),n=o(n,s,p,i,e[h+2],23,-995338651),i=c(i,n,s,p,e[h+0],6,-198630844),p=c(p,i,n,s,e[h+7],10,1126891415),s=c(s,p,i,n,e[h+14],15,-1416354905),n=c(n,s,p,i,e[h+5],21,-57434055),i=c(i,n,s,p,e[h+12],6,1700485571),p=c(p,i,n,s,e[h+3],10,-1894986606),s=c(s,p,i,n,e[h+10],15,-1051523),n=c(n,s,p,i,e[h+1],21,-2054922799),i=c(i,n,s,p,e[h+8],6,1873313359),p=c(p,i,n,s,e[h+15],10,-30611744),s=c(s,p,i,n,e[h+6],15,-1560198380),n=c(n,s,p,i,e[h+13],21,1309151649),i=c(i,n,s,p,e[h+4],6,-145523070),p=c(p,i,n,s,e[h+11],10,-1120210379),s=c(s,p,i,n,e[h+2],15,718787259),n=c(n,s,p,i,e[h+9],21,-343485551),i=l(i,u),n=l(n,d),s=l(s,f),p=l(p,v)}return Array(i,n,s,p)}function s(e,t,i,n,s,a){return l(p(l(l(t,e),l(n,a)),s),i)}function a(e,t,i,n,a,r,o){return s(t&i|~t&n,e,t,a,r,o)}function r(e,t,i,n,a,r,o){return s(t&n|i&~n,e,t,a,r,o)}function o(e,t,i,n,a,r,o){return s(t^i^n,e,t,a,r,o)}function c(e,t,i,n,a,r,o){return s(i^(t|~n),e,t,a,r,o)}function l(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function p(e,t){return e<<t|e>>>32-t}function h(e){for(var t=Array(),i=(1<<f)-1,n=0;n<e.length*f;n+=f)t[n>>5]|=(e.charCodeAt(n/f)&i)<<n%32;return t}function u(e){for(var t=d?"0123456789ABCDEF":"0123456789abcdef",i="",n=0;n<4*e.length;n++)i+=t.charAt(e[n>>2]>>n%4*8+4&15)+t.charAt(e[n>>2]>>n%4*8&15);return i}var d=0,f=8;e.exports=i},function(e,t,i){var n=i(104),s=i(4),a=(i(6),i(5).flow),r=i(7),o=i(25),c=(i(43),i(26)),l=(i(1),function(e,t){return e.replace(/(type%3d)login/,"$1"+t)});e.exports={_getLinks:function(){var e=s.currentFlow===a.LOGIN?s.thirdLoginLinks:s.currentFlow===a.RESETPWD?s.thirdResetLinks:"";o.isPC?this.view._bind3rdClick(e):this.view._update3rdLoginUrl(e)},_initPartial:function(){var e=this;s.thirdLoginLinks&&s.thirdLoginLinks.qq?e._getLinks():n.getOauthLoginUrl({domain:c.thirdLoginDomain,mode:o.device,iswechat:o.isWeixin,protocol:location.protocol,regsource:r.source,returnurl:r.redirectURL}).success(function(t){var i=t.Data,n={};i&&i.length&&$.each(i,function(e,t){n[t.key]=t.Url}),s.thirdLoginLinks=n,e._init3rdLinks();e._getLinks()})},__hanlde3rdClick:function(e){this._open3rdWindow(e)},_init3rdLinks:function(){var e=o.isPC?"reset":"mreset";for(var t in s.thirdLoginLinks)s.thirdResetLinks[t]=l(s.thirdLoginLinks[t],e)},_open3rdWindow:function(e){document.domain=c.thirdLoginDomain,window.open(e,"ThirdPartyLogin","location=no,scrollbars=no,width=450,height=600")}}},function(e,t,i){var n=i(6),s=i(5).actions,a=i(5).flow,r=i(24),o=i(104),c=i(107),l=i(7),p=i(4),h=i(43),u=i(1),d=i(110),f=i(108);n.register(s.REGISTER,[f,d],{init:function(){l.diableEmail&&this.view.element.find(".hp-tab-head").hide(),this._initCaptcha()},__sendMobileData:function(e){var t=this;h.fire("register_mobile_submit",{groupid:p.categoryId,categoryid:p.interestId}),o.register({userext:e.mobile,username:e.username,password:c(e.password),source:t._getSource(),msgCode:e.mobileCode,categoryid:p.interestId}).success(function(e){this.is_trial&&(e.Data.is_trial=!0),t._registerSuccess(e.Data)}).failure(function(e,i){t._registerFailure(e,i)}),p.username=e.username},__sendEmailData:function(e){var t=this;h.fire("register_email_submit",{groupid:p.categoryId,categoryid:p.interestId}),o.register({userext:e.email,username:e.username,password:c(e.password),source:t._getSource(),imgcode:e.captchaCode,token:r.token,categoryid:p.interestId}).success(function(e){this.is_trial&&(e.Data.is_trial=!0),t._registerSuccess(e.Data)}).failure(function(e,i){t._registerFailure(e,i)}),p.username=e.username,p.email=e.email},__login:function(){n.switchToFlow(a.LOGIN)},__checkExist:function(e,t,i){o.checkUserName(t,e).success(function(){i(!0)}).failure(function(e,t){i(!1,e)})},__tabIndexChanged:function(e){this.fireBI(e)},__previous:function(){"mobile"===l.client?n.historyBack():n.switchToFlow(a.LOGIN)},fireBI:function(e){var t={mobile:"register_mobile_show",email:"register_email_show"};e=e||"mobile",h.fire(t[e],{groupId:p.categoryId,categoryid:p.interestId})},_getSource:function(){return"string"==typeof l.source?l.source:"function"==typeof l.source?l.source():void 0},_registerSuccess:function(e){var t=this;h.fire("register_success",{useremail:e.email,usermobile:e.mobile,groupid:p.categoryId,categoryid:p.interestId}),o.syncLogin(e,function(){h.fire("sync_login_success",{regtype:e.mobile?"mobile":"email"}),t.view._switchRegisterButtonState(!1),n.switchToView(s.REG_SUCCESS)},function(){h.fire("sync_login_failure",{regtype:e.mobile?"mobile":"email"}),t.view._switchRegisterButtonState(!1)})},_registerFailure:function(e,t){var i=this.view;u.showErrorMessage(t,e,i),i._switchRegisterButtonState(!1)},_initCaptcha:function(){var e=this;o.isShowRegisterCaptcha().success(function(t){if(0===t.Code){var i=t.Data;e.view.isShowCaptcha={email:i.Email,mobile:i.Mobile},(i.Mobile||i.Email)&&e.view._renderCaptcha(),e.view._switchCaptcha()}})},_skipInsterest:function(){var e=l.skips;if(!e)return!1;for(var t=0,i=e.length;i>t;t++)if("interest-select"===e[t])return!0;return!1},show:function(){this._skipInsterest()&&this.view.element.find(".hp-img-step").hide(),this.view.show()}})},function(e,t,i){var n=i(24),s=i(104),a=i(43),r=i(1);e.exports={__getMessageCode:function(e){var t=this.view;a.fire("register_mobile_sms"),e.token=n.token,s.sendMessage(e).failure(function(e,i){r.showErrorMessage(i,e,t)})}}},function(e,t,i){var n=i(6),s=i(5).actions,a=i(5).flow,r=i(4),o=i(104),c=i(43),l=i(7),p=i(1),h=function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(e,t){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return!0;return!1};n.register(s.INTEREST_SELECT,{__previous:function(){"mobile"===l.client?n.historyBack():n.switchToView(s.CATE_SELECT)},__interestSelect:function(e){r.interestId=e,c.fire("interest_choose",{categoryid:e,login:!!r.setInterest,groupid:r.categoryId}),this._switchNextView()},__skip:function(){c.fire("interest_skep"),this._switchNextView()},skiped:function(){(r.currentFlow===a.LOGIN||r.currentFlow===a.LOGIN_THIRD)&&n.switchToView(s.LOGIN_TRANSFER)},show:function(){var e;h(l.skips)&&u(s.CATE_SELECT,l.skips)&&(e=!0),this.view.show(r.categoryId,e)},_switchNextView:function(){if(r.setInterest){var e=r.interestId;e?o.setTag(e).success(function(e){n.switchToView(s.REG_SUCCESS)}).failure(function(e){p.showErrorMessage(e)}):n.switchToView(s.REG_SUCCESS)}else n.switchToView(s.REGISTER)}})},function(e,t,i){var n=i(6),s=i(5).actions,a=i(5).flow,r=i(4),o=i(43);n.register(s.CATE_SELECT,{__previous:function(){n.historyBack()},__login:function(){n.switchToFlow(a.LOGIN)},__selectCategory:function(e){r.categoryId=e,o.fire("interest_step1_choose",{login:!!r.setInterest,groupid:e}),n.switchToView(s.INTEREST_SELECT)},__skip:function(){o.fire("interest_step1_skip",{login:!!r.setInterest}),this._switchNextView()},_switchNextView:function(){r.setInterest?n.redirect():n.switchToView(s.REGISTER)}})},function(e,t,i){var n=i(6),s=i(5).actions,a=500;n.register(s.LOGIN_TRANSFER,{show:function(){this.view.show(),window.setTimeout(function(){n.redirect()},a)},skiped:function(){action.redirect()}})},function(e,t,i){var n=i(6),s=i(5).actions,a=i(7),r=i(4),o=i(104),c=i(43);n.register(s.REG_SUCCESS,{__getPushData:function(e){var t=this;o.getPushData().success(function(i){i.Data&&(e.html(t.view.genPushMarkup(i.Data)),"popup"===r.mode&&r.element.hpdialog("reset"),e.delegate("a[data-bi-type]","click",function(e){var t=$(this),i=t.attr("data-bi-type");c.fire("register_success_choose",{source:a.source,groupid:r.categoryId,categoryid:r.interestId,type:i})}))})},__continue:function(){n.redirect()},__emailClick:function(e){c.fire("register_success_active_email"),window.open(e)},skiped:function(){n.redirect()},show:function(){this.view.show(r)},fireBI:function(){c.fire("register_success_show",{groupId:r.categoryId,categoryid:r.interestId})}})},function(e,t,i){var n=i(6),s=i(5).actions,a=i(24),r=i(104),o=i(43),c=i(4),l=i(7),p=i(107),h=i(5).flow,u=i(1),d=i(116);n.register(s.LOGIN_THIRD,[d],{__previous:function(){o.fire("3rd_login_back",{regtype:c.thirdEntry}),"mobile"===l.client?n.historyBack():n.switchToFlow(h.LOGIN)},__submit:function(e){var t=this,i=t.view;o.fire("3rd_login_bind_submit",{regtype:c.thirdEntry});e.password;e.password=p(e.password),e.token=a.token,r.oauthLogin(e).success(function(e){var t=null===e.Data.UserTag,a=function(){return i.disableSubmit(!1),c.setInterest=t,"weixin"===c.thirdEntry?n.switchToView(s.LOGIN_THIRD_SUCCESS):void(t?n.switchToView(s.CATE_SELECT,!0):n.switchToView(s.LOGIN_TRANSFER))};r.syncLogin(e.Data,function(){o.fire("sync_login_success",{logintype:"3rd"}),a()},function(){o.fire("sync_login_failure",{logintype:"3rd"})})}).failure(function(e,t){u.showErrorMessage(t,e,i),i.disableSubmit(!1),o.fire("login_failure",{errorcode:t})})},__accountBind:function(e){o.fire("3rd_login_bind_click",{regtype:c.thirdEntry}),this._oauthSubmit({userName:c.unameOfThird},null,function(e,t){n.switchToView(s.LOGIN_THIRD_BIND),u.showErrorMessage(t,e,c.currentAction.view)})},show:function(e){if(!e)return this.view.show();var t=!e.UserTag;e.Platform&&(c.thirdEntry=e.Platform),e.IsBind?(c.currentFlow=h.LOGIN,r.syncLogin(e,function(){o.fire("sync_login_success",{logintype:"3rd"}),c.setInterest=t,t?n.switchToView(s.CATE_SELECT,!0):n.switchToView(s.LOGIN_TRANSFER)},function(){o.fire("sync_login_failure",{logintype:"3rd"})})):(c.unameOfThird=e.Nick,this.view.show(e.Headimg,e.Nick,c.thirdEntry))}})},function(e,t,i){var n=i(6),s=i(5).actions,a=i(104),r=i(4),o=i(43),c=i(7);i(1);e.exports={_oauthSubmit:function(e,t,i){var c=this.view;o.fire("3rd_login_register_new",{regtype:r.thirdEntry}),e.source=this._getSource(),a.oauthRegister(e).success(function(e){var t=null===e.Data.UserTag||!e.Data.UserTag.CategoryId,i=function(){return c.disableSubmit(!1),r.setInterest=t,"weixin"===r.thirdEntry?n.switchToView(s.LOGIN_THIRD_SUCCESS):void(t?n.switchToView(s.CATE_SELECT,!0):n.switchToView(s.LOGIN_TRANSFER))};this.is_trial&&(e.Data.is_trial=!0),e.Data.reg3rd=!0,a.syncLogin(e.Data,function(){o.fire("sync_login_success",{regtype:"3rd"}),i()},function(){o.fire("sync_login_failure",{regtype:"3rd"})})}).failure(function(e,t){i&&i.call(null,e,t)})},_getSource:function(){return"string"==typeof c.source?c.source:"function"==typeof c.source?c.source():void 0}}},function(e,t,i){var n=i(6),s=i(5).actions,a=(i(104),i(4)),r=i(7),o=i(43),c=i(1),l=i(116);n.register(s.LOGIN_THIRD_BIND,[l],{__previous:function(){o.fire("3rd_login_bind_back",{regtype:a.thirdEntry}),"mobile"===r.client?n.historyBack():n.switchToView(s.LOGIN_THIRD)},__submit:function(e){var t=this.view;this._oauthSubmit(e,null,function(e,i){t.disableSubmit(!1),c.showErrorMessage(i,e,t)})},show:function(){this.view.show({uname:a.unameOfThird})}})},function(e,t,i){var n=i(6),s=i(5).actions;n.register(s.LOGIN_THIRD_SUCCESS,{__continue:function(){n.redirect()}})},function(e,t,i){var n=i(6),s=i(5).actions,a=i(5).flow,r=i(7),o=i(108);n.register(s.RESETPWD_CHOOSE,[o],{__smsSelect:function(){n.switchToView(s.RESETPWD_SMS)},__emailSelect:function(){n.switchToView(s.RESETPWD_EMAIL)},__previous:function(){"mobile"===r.client?n.historyBack():n.switchToFlow(a.LOGIN)}})},function(e,t,i){var n=i(6),s=i(4),a=i(104),r=i(5).actions,o=i(7),c=i(24),l=i(1),p=i(121);n.register(r.RESETPWD_EMAIL,[p],{__previous:function(){"mobile"===o.client?n.historyBack():n.switchToFlow(r.RESETPWD_CHOOSE)},__submit:function(e){e.token=c.token;var t=this.view;a.findPwdByEmail(e).success(function(t){s.email=e.email,n.switchToView(r.RESETPWD_EMAIL_VALIDATE)}).failure(function(e,i){l.showErrorMessage(i,e,t)})},__checkNotExist:function(e,t,i){a.checkNotExist(t,e).success(function(){i(!0)}).failure(function(e,t){i(!1,e)})}})},function(e,t){e.exports={}},function(e,t,i){var n=i(6),s=i(4),a=i(7),r=i(5).actions;n.register(r.RESETPWD_EMAIL_VALIDATE,{__previous:function(){"mobile"===a.client?n.historyBack():n.switchToFlow(r.RESETPWD_CHOOSE)},__emailClick:function(e){window.open(e)},show:function(){this.view.show(s)}})},function(e,t,i){var n=i(6),s=i(5).actions,a=i(121),r=i(1),o=i(7),c=i(107),l=i(104);n.register(s.RESETPWD_RESET,[a],{__previous:function(){"mobile"===o.client?n.historyBack():n.switchToFlow(s.RESETPWD_CHOOSE)},__submit:function(e){var t=this.view;e.password=c(e.password),l.updatePwd(e).success(function(e){n.switchToView(s.RESETPWD_SUCCESS)}).failure(function(e,i){r.showErrorMessage(i,e,t)}).complete(function(e,i){t.reset()})}})},function(e,t,i){var n=i(6),s=i(104),a=i(5).actions,r=i(121),o=i(1),c=i(7),l=i(110);n.register(a.RESETPWD_SMS,[r,l],{init:function(){this._initCaptcha()},__previous:function(){"mobile"===c.client?n.historyBack():n.switchToFlow(a.RESETPWD_CHOOSE)},__submit:function(e){var t=this.view;s.findPwdByMobile(e).success(function(e){var t=e.Data;n.switchToView(a.RESETPWD_RESET,{username:t.UserName})}).failure(function(e,i){o.showErrorMessage(i,e,t)})},__checkNotExist:function(e,t,i){s.checkNotExist(t,e).success(function(){i(!0)}).failure(function(e,t){i(!1,e)})},_initCaptcha:function(){var e=this;s.isShowRegisterCaptcha().success(function(t){if(0===t.Code){var i=t.Data;i.ResetByMobile&&(e.view._showCaptcha(!0),e.view._updateCaptcha())}})}})},function(e,t,i){var n=i(6),s=i(5).actions,a=i(7),r=i(5).flow;n.register(s.RESETPWD_SUCCESS,{__toLogin:function(){n.switchToFlow(r.LOGIN)},__previous:function(){"mobile"===a.client?n.historyBack():n.switchToFlow(r.LOGIN)}})},function(e,t,i){var n=i(6),s=i(7),a=i(5).actions;n.register(a.RESETPWD_FAIL,{__previous:function(){"mobile"===s.client?n.historyBack():n.switchToFlow(a.RESETPWD_CHOOSE)}})}]);